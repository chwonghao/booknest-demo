"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[838],{6596:(t,e,o)=>{o.d(e,{A:()=>A});var n=o(5043),r=o(2110),i=o(2828),a=o(6446),s=o(6591),c=o(3845),l=o(6494),d=o(5865),h=o(1906),u=o(4117),x=o(3282),p=o(9007),g=o(8163),m=o(2603),y=o(7488),j=o(579);const A=t=>{let{product:e,showAddToCartButton:o=!0}=t;const{t:A,i18n:f}=(0,u.Bd)(),{addItem:b}=(0,n.useContext)(m.M),w=e.originalPrice?Math.round((e.originalPrice-e.price)/e.originalPrice*100):0,v=0===e.stockQuantity,B=t=>{if(null===t||void 0===t)return"";if("vi"===f.language.split("-")[0]){return"".concat((25e3*t).toLocaleString("vi-VN")," \u20ab")}return"$".concat(t.toFixed(2))};return(0,j.jsxs)(r.A,{sx:{height:"100%",display:"flex",flexDirection:"column",opacity:v?.6:1,position:"relative"},children:[(0,j.jsxs)(i.A,{component:g.N_,to:"/products/".concat(e.id),sx:{flexGrow:1},children:[(0,j.jsxs)(a.A,{sx:{position:"relative"},children:[(0,j.jsx)(s.A,{component:"img",height:"240",image:e.imageUrl,alt:e.name}),w>0&&(0,j.jsx)(c.A,{label:"-".concat(w,"%"),color:"secondary",size:"small",sx:{position:"absolute",top:8,right:8,fontWeight:"bold"}}),v&&(0,j.jsx)(c.A,{label:A("product.outOfStock"),color:"error",size:"small",sx:{position:"absolute",top:8,left:8,fontWeight:"bold"}})]}),(0,j.jsxs)(l.A,{children:[(0,j.jsx)(d.A,{gutterBottom:!0,variant:"h6",component:"div",noWrap:!0,title:e.name,children:e.name}),(0,j.jsx)(d.A,{variant:"body2",color:"text.secondary",mb:1,children:e.authors||A("product.unknownAuthor")}),(0,j.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,j.jsx)(d.A,{variant:"h5",color:"primary.main",fontWeight:"bold",children:B(e.price)}),w>0&&(0,j.jsx)(d.A,{variant:"body2",sx:{textDecoration:"line-through"},color:"text.secondary",children:B(e.originalPrice)})]})]})]}),o&&(0,j.jsx)(a.A,{sx:{p:2,pt:0},children:(0,j.jsx)(h.A,{fullWidth:!0,variant:"contained",color:"primary",startIcon:v?(0,j.jsx)(x.A,{}):(0,j.jsx)(p.A,{}),onClick:t=>{t.preventDefault(),t.stopPropagation(),b(e),y.oR.success(A("product.addedToCart",{name:e.name}))},disabled:v,sx:{bgcolor:v?"grey.400":"primary.main"},children:A(v?"product.outOfStock":"product.addToCart")})})]})}},6642:(t,e,o)=>{o.r(e),o.d(e,{default:()=>k});var n=o(9379),r=o(5043),i=o(9252),a=o(6446),s=o(5865),c=o(1637),l=o(4117),d=o(4975),h=o(7072),u=(o(4014),o(3874),o(5084),o(2554)),x=o(7531),p=o(3336),g=o(579);const m=()=>{const{t:t}=(0,l.Bd)();return(0,g.jsx)(a.A,{mb:4,children:(0,g.jsx)(d.RC,{modules:[h.Vx,h.dK,h.Ij],spaceBetween:30,slidesPerView:1,navigation:!0,pagination:{clickable:!0},autoplay:{delay:3500},loop:!0,children:[...Array(3)].map((e,o)=>(0,g.jsx)(d.qr,{children:(0,g.jsx)(p.A,{elevation:3,sx:{height:350,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2,background:"linear-gradient(45deg, #0D7EBE 30%, #65A9D7 90%)",color:"white"},children:(0,g.jsxs)(s.A,{variant:"h3",component:"h2",fontWeight:"bold",children:[t("home.promotionBanner")," ",o+1]})})},o))})})};var y=o(8903),j=o(2828),A=o(2500),f=o(8163);const b=()=>{const{t:t}=(0,l.Bd)(),[e,o]=(0,r.useState)([]);return(0,r.useEffect)(()=>{(async()=>{try{const t=await(0,x.jE)();o(t.slice(0,8))}catch(t){console.error("Failed to fetch categories:",t)}})()},[]),(0,g.jsxs)(a.A,{mb:5,children:[(0,g.jsx)(s.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:t("home.categories")}),(0,g.jsx)(y.Ay,{container:!0,spacing:2,children:e.map(t=>(0,g.jsx)(y.Ay,{item:!0,xs:6,sm:4,md:3,lg:1.5,sx:{display:"flex"},children:(0,g.jsx)(j.A,{component:f.N_,to:"/products?category=".concat(t.id),sx:{borderRadius:1,height:"100%"},children:(0,g.jsxs)(p.A,{elevation:1,sx:{p:2,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"box-shadow 0.3s","&:hover":{boxShadow:3}},children:[(0,g.jsx)(A.A,{color:"primary",sx:{fontSize:40,mb:1}}),(0,g.jsx)(s.A,{variant:"subtitle1",component:"h3",align:"center",sx:{color:"text.primary"},children:t.name})]})})},t.id))})]})};var w=o(6596),v=o(1906);const B=t=>{let{category:e,showAddToCartButton:o=!0}=t;const[n,i]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{d(!0);const t=(await(0,u.j0)({categoryId:e.id,limit:4})||[]).sort((t,e)=>t.stockQuantity>0&&0===e.stockQuantity?-1:0===t.stockQuantity&&e.stockQuantity>0?1:0);i(t)}catch(t){console.error("Failed to fetch products for category ".concat(e.name,":"),t),i([])}finally{d(!1)}})()},[e]),l?(0,g.jsx)(c.A,{sx:{display:"block",margin:"auto",my:4}}):0===n.length?null:(0,g.jsxs)(a.A,{component:"section",sx:{mb:5},children:[(0,g.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,g.jsx)(s.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:e.name}),(0,g.jsx)(v.A,{component:f.N_,to:"/products?category=".concat(e.id),children:"Xem th\xeam"})]}),(0,g.jsx)(y.Ay,{container:!0,spacing:3,children:n.map(t=>(0,g.jsx)(y.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,g.jsx)(w.A,{product:t,showAddToCartButton:o})},t.id))})]})},k=()=>{const{t:t}=(0,l.Bd)(),[e,o]=(0,r.useState)([]),[p,y]=(0,r.useState)([]),[j,A]=(0,r.useState)(!0),[f,v]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(async()=>{try{A(!0);const t=(await(0,u.j0)({type:"featured"})).filter(t=>t.stockQuantity>0).map(t=>(0,n.A)((0,n.A)({},t),{},{originalPrice:t.price&&t.price>0?Math.round(1.25*t.price):0}));o(t),v(null)}catch(t){v(t.message),o([])}finally{A(!1)}})();(async()=>{try{const t=await(0,x.jE)();y(t)}catch(f){console.error("Failed to fetch categories on HomePage:",f)}})()},[]),(0,g.jsxs)(i.A,{maxWidth:"lg",children:[(0,g.jsx)(m,{}),(0,g.jsx)(b,{}),(0,g.jsxs)(a.A,{component:"section",sx:{mb:5},children:[(0,g.jsx)(s.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:t("home.featuredBooks")}),j&&(0,g.jsx)(c.A,{}),f&&(0,g.jsx)(s.A,{color:"error",align:"center",children:f}),(0,g.jsx)(d.RC,{modules:[h.Vx,h.dK,h.Ij],spaceBetween:24,slidesPerView:4,navigation:!0,pagination:{clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,breakpoints:{320:{slidesPerView:1,spaceBetween:10},600:{slidesPerView:2,spaceBetween:15},900:{slidesPerView:3,spaceBetween:20},1200:{slidesPerView:4,spaceBetween:24}},children:e.map(t=>(0,g.jsx)(d.qr,{style:{height:"auto"},children:(0,g.jsx)(w.A,{product:t,showAddToCartButton:!1})},t.id))})]}),p.map(t=>(0,g.jsx)(B,{category:t,showAddToCartButton:!1},t.id))]})}},7531:(t,e,o)=>{o.d(e,{c0:()=>i,jE:()=>r});var n=o(4512);async function r(){try{return(await n.A.get("/categories")).data}catch(t){return console.error("Error fetching categories:",t),[]}}async function i(t){try{return(await n.A.get("/categories/".concat(t,"/products"))).data}catch(e){return console.error("Error fetching products for category ".concat(t,":"),e),[]}}}}]);
//# sourceMappingURL=838.73f7a939.chunk.js.map