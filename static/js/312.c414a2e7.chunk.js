"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[312],{3159:(e,a,n)=>{var t=n(4994);a.A=void 0;var i=t(n(39)),r=n(579);a.A=(0,i.default)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},3471:(e,a,n)=>{var t=n(4994);a.A=void 0;var i=t(n(39)),r=n(579);a.A=(0,i.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},7531:(e,a,n)=>{n.d(a,{c0:()=>l,jE:()=>s});var t=n(2554);const i=[{id:1,name:"L\u1ecbch s\u1eed"},{id:2,name:"Ti\u1ec3u thuy\u1ebft"},{id:3,name:"K\u1ef9 n\u0103ng s\u1ed1ng"},{id:4,name:"Khoa h\u1ecdc"},{id:5,name:"Kinh t\u1ebf"}],r=e=>new Promise(a=>setTimeout(a,e));async function s(){return await r(300),console.log("MOCK: fetchCategories"),[...i]}async function l(e){return await r(500),console.log("MOCK: fetchProductsByCategory",{id:e}),(0,t.j0)({categoryId:e})}},8312:(e,a,n)=>{n.r(a),n.d(a,{default:()=>K});var t=n(9379),i=n(5043),r=n(3336),s=n(5865),l=n(1906),c=n(6446),o=n(5795),d=n(3193),h=n(8356),u=n(9285),m=n(2143),g=n(1637),x=n(4194),p=n(9650),A=n(1806),j=n(4882),y=n(8076),b=n(2420),v=n(8093),f=n(3460),k=n(1045),P=n(7392),C=n(1574),M=n(35),w=n(6600),W=n(2935),S=n(8903),I=n(9347),D=n(7488),z=(n(2342),n(3159)),L=n(3471),N=n(2554),Q=n(4117),E=n(7531),R=n(579);const U={externalId:"",name:"",authors:"",publisher:"",language:"",isbn:"",categoryId:"",pagesNumber:"",publishYear:"",publishMonth:"",publishDay:"",description:"",imageUrl:"",stockQuantity:"",price:""},K=()=>{const[e,a]=(0,i.useState)([]),[n,K]=(0,i.useState)(!0),[O,F]=(0,i.useState)(null),[Y,B]=(0,i.useState)(!1),[H,q]=(0,i.useState)(U),[T,V]=(0,i.useState)(null),[G,$]=(0,i.useState)({search:"",categoryId:""}),{t:J}=(0,Q.Bd)(),[X,Z]=(0,i.useState)([]),[_,ee]=(0,i.useState)({key:"name",direction:"asc"}),[ae,ne]=(0,i.useState)(0),[te,ie]=(0,i.useState)(10),re=(0,i.useCallback)(async()=>{try{K(!0);const e=await(0,N.j0)({});a(e||[]),F(null)}catch(e){F(J("admin.productManagementPage.fetchError")),a([]),console.error(e)}finally{K(!1)}},[J]);(0,i.useEffect)(()=>{re();(async()=>{try{const e=await(0,E.jE)();Z(e||[])}catch(e){console.error("Failed to fetch categories:",e)}})()},[re]);const se=e=>{V(e.id);const a=(0,t.A)((0,t.A)({},U),e);q(a),B(!0)},le=()=>{B(!1),V(null),q(U)},ce=e=>{const{name:a,value:n}=e.target;q(e=>(0,t.A)((0,t.A)({},e),{},{[a]:n}))},oe=e=>{const{name:a,value:n}=e.target;$(e=>(0,t.A)((0,t.A)({},e),{},{[a]:n}))},de=e=>{const a=_.key===e&&"asc"===_.direction;ee({key:e,direction:a?"desc":"asc"})},he=(0,i.useMemo)(()=>{let a=[...e];return G.search&&(a=a.filter(e=>e.name.toLowerCase().includes(G.search.toLowerCase()))),G.categoryId&&(a=a.filter(e=>e.categoryId===G.categoryId)),null!==_.key&&a.sort((e,a)=>e[_.key]<a[_.key]?"asc"===_.direction?-1:1:e[_.key]>a[_.key]?"asc"===_.direction?1:-1:0),a},[e,G,_]);return(0,R.jsxs)(r.A,{sx:{p:3,m:2},children:[(0,R.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:J("admin.productManagementPage.title")}),(0,R.jsx)(l.A,{variant:"contained",sx:{mb:2},onClick:()=>{V(null),q(U),B(!0)},children:J("admin.productManagementPage.addNewProduct")}),(0,R.jsxs)(c.A,{sx:{display:"flex",gap:2,mb:3},children:[(0,R.jsx)(o.A,{name:"search",label:J("admin.productManagementPage.searchPlaceholder"),variant:"outlined",size:"small",value:G.search,onChange:oe,sx:{flexGrow:1}}),(0,R.jsxs)(d.A,{size:"small",sx:{minWidth:200},children:[(0,R.jsx)(h.A,{children:J("home.categories")}),(0,R.jsxs)(u.A,{name:"categoryId",value:G.categoryId,label:J("home.categories"),onChange:oe,MenuProps:{disableScrollLock:!0},children:[(0,R.jsx)(m.A,{value:"",children:(0,R.jsx)("em",{children:J("admin.productManagementPage.allCategories")})}),X.map(e=>(0,R.jsx)(m.A,{value:e.id,children:e.name},e.id))]})]})]}),n?(0,R.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",my:5},children:(0,R.jsx)(g.A,{})}):O?(0,R.jsx)(x.A,{severity:"error",children:O}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(p.A,{children:(0,R.jsxs)(A.A,{stickyHeader:!0,children:[(0,R.jsx)(j.A,{children:(0,R.jsxs)(y.A,{children:[(0,R.jsx)(b.A,{sx:{width:"10%"},children:J("productPage.image")}),(0,R.jsx)(b.A,{sortDirection:"name"===_.key&&_.direction,children:(0,R.jsx)(v.A,{active:"name"===_.key,direction:"name"===_.key?_.direction:"asc",onClick:()=>de("name"),children:J("productPage.name")})}),(0,R.jsx)(b.A,{children:J("productPage.categories")}),(0,R.jsx)(b.A,{align:"right",sortDirection:"price"===_.key&&_.direction,children:(0,R.jsx)(v.A,{active:"price"===_.key,direction:"price"===_.key?_.direction:"asc",onClick:()=>de("price"),children:J("productPage.price")})}),(0,R.jsx)(b.A,{align:"right",sortDirection:"stockQuantity"===_.key&&_.direction,children:(0,R.jsx)(v.A,{active:"stockQuantity"===_.key,direction:"stockQuantity"===_.key?_.direction:"asc",onClick:()=>de("stockQuantity"),children:J("productPage.stockRemaining",{count:""}).replace("{{count}}","").trim()})}),(0,R.jsx)(b.A,{align:"center",children:J("profile.settings")})]})}),(0,R.jsx)(f.A,{children:he.slice(ae*te,ae*te+te).map(e=>(0,R.jsxs)(y.A,{hover:!0,children:[(0,R.jsx)(b.A,{children:(0,R.jsx)(k.A,{variant:"square",src:e.imageUrl,alt:e.name,sx:{width:56,height:56}})}),(0,R.jsx)(b.A,{onClick:()=>se(e),sx:{cursor:"pointer","&:hover":{color:"primary.main"}},children:e.name}),(0,R.jsx)(b.A,{children:e.categoryName||"N/A"}),(0,R.jsxs)(b.A,{align:"right",children:["$",e.price.toFixed(2)]}),(0,R.jsx)(b.A,{align:"right",children:e.stockQuantity}),(0,R.jsxs)(b.A,{align:"center",children:[(0,R.jsx)(P.A,{color:"primary",onClick:()=>se(e),children:(0,R.jsx)(z.A,{})}),(0,R.jsx)(P.A,{color:"error",children:(0,R.jsx)(L.A,{})})]})]},e.id))})]})}),(0,R.jsx)(C.A,{rowsPerPageOptions:[5,10,25,50],component:"div",count:he.length,rowsPerPage:te,page:ae,onPageChange:(e,a)=>{ne(a)},onRowsPerPageChange:e=>{ie(parseInt(e.target.value,10)),ne(0)},SelectProps:{MenuProps:{disableScrollLock:!0,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}}}})]}),(0,R.jsxs)(M.A,{open:Y,onClose:le,maxWidth:"md",fullWidth:!0,disableScrollLock:!0,children:[(0,R.jsx)(w.A,{children:J(T?"admin.userManagementPage.editUser":"admin.productManagementPage.addNewProduct")}),(0,R.jsx)(W.A,{children:(0,R.jsxs)(S.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("register.fullName"),name:"name",value:H.name,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.byAuthor",{authors:""}).replace("by ",""),name:"authors",value:H.authors,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.publisher"),name:"publisher",value:H.publisher,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.language"),name:"language",value:H.language,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.isbn"),name:"isbn",value:H.isbn,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("home.categories")+" ID",name:"categoryId",type:"number",value:H.categoryId,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.pages"),name:"pagesNumber",type:"number",value:H.pagesNumber,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.published")+" Year",name:"publishYear",type:"number",value:H.publishYear,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.published")+" Month",name:"publishMonth",type:"number",value:H.publishMonth,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.published")+" Day",name:"publishDay",type:"number",value:H.publishDay,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.quantity"),name:"stockQuantity",type:"number",value:H.stockQuantity,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.price"),name:"price",type:"number",value:H.price,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:"External ID",name:"externalId",value:H.externalId,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,children:(0,R.jsx)(o.A,{fullWidth:!0,multiline:!0,rows:4,label:J("productPage.description"),name:"description",value:H.description,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,children:(0,R.jsx)(o.A,{fullWidth:!0,label:J("productPage.image")+" URL",name:"imageUrl",value:H.imageUrl,onChange:ce})})]})}),(0,R.jsxs)(I.A,{children:[(0,R.jsx)(l.A,{onClick:le,children:J("action.cancel")}),(0,R.jsx)(l.A,{onClick:async()=>{try{T?(await(0,N.fP)(T,H),D.oR.success(J("admin.productManagementPage.updateSuccess"))):(await(0,N.M9)(H),D.oR.success(J("admin.productManagementPage.addSuccess"))),le(),re()}catch(e){console.error("Failed to save product:",e),D.oR.error(J("admin.productManagementPage.saveError"))}},variant:"contained",children:J("action.saveChanges")})]})]})]})}}}]);
//# sourceMappingURL=312.c414a2e7.chunk.js.map