"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[888],{1819:(e,t,a)=>{a.d(t,{OL:()=>c,Qt:()=>d,ZS:()=>l,zr:()=>i});var s=a(2554);let n=[{id:101,userId:1,orderDate:new Date("2023-10-26T10:00:00Z").toISOString(),status:"DELIVERED",totalAmount:229e3,shippingAddress:{fullName:"Ng\u01b0\u1eddi D\xf9ng Demo",address:"123 \u0110\u01b0\u1eddng ABC, Qu\u1eadn 1, TP. HCM",phoneNumber:"0123456789"},orderItems:[{productId:1,name:"L\u01b0\u1ee3c S\u1eed Lo\xe0i Ng\u01b0\u1eddi",quantity:1,price:15e4},{productId:2,name:"Nh\xe0 Gi\u1ea3 Kim",quantity:1,price:79e3}]},{id:102,userId:1,orderDate:new Date("2023-10-28T14:30:00Z").toISOString(),status:"PENDING",totalAmount:165e3,shippingAddress:{fullName:"Ng\u01b0\u1eddi D\xf9ng Demo",address:"123 \u0110\u01b0\u1eddng ABC, Qu\u1eadn 1, TP. HCM",phoneNumber:"0123456789"},orderItems:[{productId:4,name:"Sapiens: L\u01b0\u1ee3c S\u1eed T\u01b0\u01a1ng Lai",quantity:1,price:165e3}]}],r=103;const o=e=>new Promise(t=>setTimeout(t,e)),i=async e=>{await o(1e3),console.log("MOCK: createOrderApi",e);try{for(const t of e.orderItems){const e=await(0,s.yj)(t.productId);await(0,s.NM)(t.productId,e.stockQuantity-t.quantity)}}catch(a){throw console.error("MOCK: L\u1ed7i tr\u1eeb kho khi t\u1ea1o \u0111\u01a1n h\xe0ng",a),new Error("Kh\xf4ng th\u1ec3 c\u1eadp nh\u1eadt kho, \u0111\u01a1n h\xe0ng ch\u01b0a \u0111\u01b0\u1ee3c t\u1ea1o.")}const t={id:r++,userId:e.userId,orderDate:(new Date).toISOString(),status:"PENDING",totalAmount:e.totalAmount,orderItems:e.orderItems,shippingAddress:e.shippingAddress};return n.push(t),{data:t}},d=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await o(500),console.log("MOCK: getMyOrdersApi for user ".concat(e),{params:t}),n.filter(t=>t.userId.toString()===e.toString())},l=async()=>(await o(500),console.log("MOCK: getAllOrdersApi"),[...n]),c=async(e,t)=>{await o(300),console.log("MOCK: updateOrderStatusApi for order ".concat(e," to status ").concat(t));const a=n.find(t=>t.id.toString()===e.toString());if(a)return a.status=t,a;throw new Error("Order not found")}},2078:(e,t,a)=>{a.d(t,{J:()=>o,N:()=>i});var s=a(9379);const n=[{id:1,fullName:"Ng\u01b0\u1eddi D\xf9ng Demo",email:"user@example.com",role:"USER",status:"ACTIVE",avatar:"https://i.pravatar.cc/150?u=user@example.com",phoneNumber:"0123456789",address:"123 \u0110\u01b0\u1eddng ABC, Qu\u1eadn 1, TP. HCM"},{id:2,fullName:"Qu\u1ea3n Tr\u1ecb Vi\xean",email:"admin@example.com",role:"ADMIN",status:"ACTIVE",avatar:"https://i.pravatar.cc/150?u=admin@example.com",phoneNumber:"0987654321",address:"456 \u0110\u01b0\u1eddng XYZ, Qu\u1eadn 3, TP. HCM"},{id:3,fullName:"T\xe0i Kho\u1ea3n B\u1ecb Kh\xf3a",email:"banned@example.com",role:"USER",status:"BANNED",avatar:"https://i.pravatar.cc/150?u=banned@example.com",phoneNumber:"0111222333",address:"789 \u0110\u01b0\u1eddng DEF, Qu\u1eadn 5, TP. HCM"}],r=e=>new Promise(t=>setTimeout(t,e)),o=async()=>(await r(500),console.log("MOCK: getAllUserApi"),[...n]),i=async(e,t)=>{await r(400),console.log("MOCK: updateUserApi",{userId:e,payload:t});const a=n.findIndex(t=>t.id.toString()===e.toString());if(a>-1)return n[a]=(0,s.A)((0,s.A)({},n[a]),t),n[a];throw new Error("User not found")}},4888:(e,t,a)=>{a.r(t),a.d(t,{default:()=>K});var s=a(5043),n=a(3336),r=a(1045),o=a(6446),i=a(5865),d=a(1637),l=a(4194),c=a(8903),m=a(5721),u=a(681),h=a(8734),x=a(9336),g=a(95),A=a(379),p=a(1180),j=a(7869),y=a(6102),v=a(5353),f=a(3331),D=a(2185),w=a(6026),P=a(1474),I=a(6992),S=a(3192),b=a(1334),E=a(7991),N=a(2807),C=a(6559),L=a(6710),O=a(1819),T=a(2078),k=a(2554),M=a(4117),R=a(579);const B=e=>{let{icon:t,title:a,value:s,color:l,loading:c}=e;return(0,R.jsxs)(n.A,{sx:{p:2,display:"flex",alignItems:"center",height:"100%"},children:[(0,R.jsx)(r.A,{sx:{bgcolor:l,mr:2},children:t}),(0,R.jsxs)(o.A,{children:[(0,R.jsx)(i.A,{color:"text.secondary",children:a}),(0,R.jsx)(i.A,{variant:"h5",component:"p",fontWeight:"bold",children:c?(0,R.jsx)(d.A,{size:20}):s})]})]})},F={PENDING:"#FFC107",CONFIRMED:"#9C27B0",PAID:"#03A9F4",SHIPPED:"#2196F3",DELIVERED:"#8BC34A",COMPLETED:"#4CAF50",CANCELLED:"#F44336",RETURNED:"#607D8B",REFUNDED:"#795548",DEFAULT:"#9E9E9E"},K=()=>{var e,t,a,K,Q,U,H,G;const[q,V]=(0,s.useState)(null),[Z,W]=(0,s.useState)(!0),[z,J]=(0,s.useState)(null),{t:$}=(0,M.Bd)();return(0,s.useEffect)(()=>{(async()=>{try{W(!0);const e=await(0,O.ZS)(),t=await(0,T.J)(),a=new Date;a.setDate(a.getDate()-30);const s=t.filter(e=>{const t=new Date(e.createdAt);return"USER"===e.role&&t>a}).length,n=await(0,k.eN)(),r=n.reduce((e,t)=>e+(t.stockQuantity||0),0),o=n.filter(e=>e.stockQuantity<10).sort((e,t)=>e.stockQuantity-t.stockQuantity),i=e.reduce((e,t)=>(e[t.status]=(e[t.status]||0)+1,e),{}),d=Object.keys(i).map(e=>({name:e,value:i[e]})),l={totalRevenue:e.filter(e=>"COMPLETED"===e.status).reduce((e,t)=>e+t.totalAmount,0),totalOrders:e.length,newCustomers:s,productsInStock:r},c=[{name:"T2",sales:4e3},{name:"T3",sales:3e3},{name:"T4",sales:2e3},{name:"T5",sales:2780},{name:"T6",sales:1890},{name:"T7",sales:2390},{name:"CN",sales:3490}];await new Promise(e=>setTimeout(e,1e3));const m=e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)).slice(0,5),u=t.filter(e=>e.lastLogin).sort((e,t)=>new Date(t.lastLogin)-new Date(e.lastLogin)).slice(0,5);V({summaryData:l,salesData:c,recentOrders:m,lowStockProducts:o,orderStatusData:d,recentLogins:u}),J(null)}catch(e){console.error("Failed to fetch dashboard data:",e),J($("admin.dashboardPage.fetchError")),V(null)}finally{W(!1)}})()},[$]),z?(0,R.jsx)(l.A,{severity:"error",children:z}):(0,R.jsxs)(o.A,{sx:{flexGrow:1},children:[(0,R.jsx)(i.A,{variant:"h4",gutterBottom:!0,component:"h1",fontWeight:"bold",children:$("admin.dashboardPage.title")}),(0,R.jsxs)(c.Ay,{container:!0,spacing:3,pb:10,children:[(0,R.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,R.jsx)(B,{icon:(0,R.jsx)(S.A,{}),title:$("admin.dashboardPage.totalRevenue"),value:null!==q&&void 0!==q&&null!==(e=q.summaryData)&&void 0!==e&&e.totalRevenue?"$".concat(q.summaryData.totalRevenue.toLocaleString()):"N/A",color:"success.main",loading:Z})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,R.jsx)(B,{icon:(0,R.jsx)(b.A,{}),title:$("admin.dashboardPage.totalOrders"),value:null!==(t=null===q||void 0===q||null===(a=q.summaryData)||void 0===a?void 0:a.totalOrders)&&void 0!==t?t:"N/A",color:"info.main",loading:Z})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,R.jsx)(B,{icon:(0,R.jsx)(E.A,{}),title:$("admin.dashboardPage.newCustomers"),value:null!==(K=null===q||void 0===q||null===(Q=q.summaryData)||void 0===Q?void 0:Q.newCustomers)&&void 0!==K?K:"N/A",color:"warning.main",loading:Z})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,R.jsx)(B,{icon:(0,R.jsx)(L.A,{}),title:$("admin.dashboardPage.productsInStock"),value:null!==(U=null===q||void 0===q||null===(H=q.summaryData)||void 0===H?void 0:H.productsInStock)&&void 0!==U?U:"N/A",color:"error.main",loading:Z})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:8,children:(0,R.jsxs)(n.A,{sx:{p:2,display:"flex",flexDirection:"column",height:400},children:[(0,R.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:$("admin.dashboardPage.weeklyRevenue")}),Z?(0,R.jsx)(o.A,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,R.jsx)(d.A,{})}):(0,R.jsx)(p.u,{width:"100%",height:"90%",children:(0,R.jsxs)(P.E,{data:(null===q||void 0===q?void 0:q.salesData)||[],margin:{top:5,right:20,left:-10,bottom:-10},children:[(0,R.jsx)(v.d,{strokeDasharray:"3 3"}),(0,R.jsx)(D.W,{dataKey:"name"}),(0,R.jsx)(w.h,{}),(0,R.jsx)(A.m,{}),(0,R.jsx)(g.s,{}),(0,R.jsx)(f.yP,{dataKey:"sales",fill:"#8884d8",name:$("admin.dashboardPage.sales")})]})})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:4,children:(0,R.jsxs)(n.A,{sx:{p:2,display:"flex",flexDirection:"column",height:400},children:[(0,R.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:$("admin.dashboardPage.orderStatusRatio")}),Z?(0,R.jsx)(o.A,{sx:{flexGrow:1,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,R.jsx)(d.A,{})}):(0,R.jsx)(o.A,{sx:{width:"100%",flexGrow:1},children:(0,R.jsx)(p.u,{width:"100%",height:"100%",children:(0,R.jsxs)(I.r,{children:[(0,R.jsx)(y.Fq,{data:(null===q||void 0===q?void 0:q.orderStatusData)||[],cx:"50%",cy:"50%",labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",nameKey:"name",children:null===q||void 0===q||null===(G=q.orderStatusData)||void 0===G?void 0:G.map((e,t)=>(0,R.jsx)(j.f,{fill:F[e.name]||F.DEFAULT},"cell-".concat(t)))}),(0,R.jsx)(A.m,{}),(0,R.jsx)(g.s,{})]})})})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(n.A,{sx:{p:2,height:"100%"},children:[(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,R.jsx)(C.A,{color:"warning",sx:{mr:1}}),(0,R.jsx)(i.A,{variant:"h6",gutterBottom:!0,component:"div",sx:{mb:0},children:$("admin.dashboardPage.lowStockProducts")})]}),Z?(0,R.jsx)(d.A,{}):(0,R.jsx)(m.A,{dense:!0,sx:{maxHeight:300,overflow:"auto"},children:null!==q&&void 0!==q&&q.lowStockProducts&&q.lowStockProducts.length>0?q.lowStockProducts.map(e=>(0,R.jsx)(u.Ay,{divider:!0,children:(0,R.jsx)(h.A,{primary:e.name,secondaryTypographyProps:{color:"error.main",fontWeight:"bold"},secondary:$("admin.dashboardPage.onlyLeft",{count:e.stockQuantity})})},e.id)):(0,R.jsx)(i.A,{sx:{p:2,color:"text.secondary"},children:$("admin.dashboardPage.noLowStockProducts")})})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,md:6,children:(0,R.jsxs)(n.A,{sx:{p:2,height:"100%"},children:[(0,R.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,R.jsx)(N.A,{color:"info",sx:{mr:1}}),(0,R.jsx)(i.A,{variant:"h6",gutterBottom:!0,component:"div",sx:{mb:0},children:$("admin.dashboardPage.recentLogins")})]}),Z?(0,R.jsx)(d.A,{}):(0,R.jsx)(m.A,{dense:!0,sx:{maxHeight:300,overflow:"auto"},children:null!==q&&void 0!==q&&q.recentLogins&&q.recentLogins.length>0?q.recentLogins.map(e=>(0,R.jsxs)(u.Ay,{divider:!0,children:[(0,R.jsx)(r.A,{sx:{mr:2},src:e.avatarUrl}),(0,R.jsx)(h.A,{primary:e.fullName,secondary:"".concat($("admin.dashboardPage.loggedInAt")).concat(new Date(e.lastLogin).toLocaleString())})]},e.id)):(0,R.jsx)(i.A,{sx:{p:2,color:"text.secondary"},children:$("admin.dashboardPage.noRecentLogins")})})]})}),(0,R.jsx)(c.Ay,{item:!0,xs:12,children:(0,R.jsxs)(n.A,{sx:{p:2,height:"100%"},children:[(0,R.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:$("admin.dashboardPage.recentOrders")}),Z?(0,R.jsx)(d.A,{}):(0,R.jsx)(m.A,{dense:!0,sx:{maxHeight:300,overflow:"auto"},children:null!==q&&void 0!==q&&q.recentOrders&&q.recentOrders.length>0?q.recentOrders.map((e,t)=>(0,R.jsxs)(s.Fragment,{children:[(0,R.jsx)(u.Ay,{alignItems:"flex-start",children:(0,R.jsx)(h.A,{primary:"".concat($("admin.dashboardPage.order")," #").concat(e.id," - ").concat(e.userName),secondary:"$".concat(e.totalAmount.toFixed(2)," - ").concat(new Date(e.createdAt).toLocaleDateString())})}),t<q.recentOrders.length-1&&(0,R.jsx)(x.A,{component:"li"})]},e.id)):(0,R.jsx)(i.A,{sx:{p:2,color:"text.secondary"},children:$("admin.dashboardPage.noRecentOrders")})})]})})]})]})}}}]);
//# sourceMappingURL=888.8b0fd492.chunk.js.map