{"version":3,"file":"static/js/888.90599d50.chunk.js","mappings":"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","sources":["api/orderApi.js","api/userApi.js","pages/admin/DashboardPage.jsx"],"sourcesContent":["import { fetchProduct, reduceStockApi } from \"./productApi\";\r\nimport client from \"./client\";\r\n\r\nexport const createOrderApi = async (payload) => {\r\n  const data = payload;\r\n  const orderItems = payload.orderItems;\r\n  try {\r\n    for (const item of orderItems) {\r\n      const product = await fetchProduct(item.productId);\r\n      await reduceStockApi(item.productId, product.stockQuantity - item.quantity);\r\n    }\r\n  } catch (error) {\r\n    console.error(error);\r\n  }\r\n  // Interceptor trong client sẽ tự động đính kèm token\r\n  const res = await client.post(\"/orders\", data);\r\n  return res;\r\n};\r\n\r\nexport const getMyOrdersApi = async (userId, params = {}) => {\r\n  // Interceptor trong client sẽ tự động đính kèm token\r\n  const res = await client.get(`/orders/user/${userId}`, { params });\r\n  return res.data;\r\n};\r\n\r\nexport const getAllOrdersApi = async () => {\r\n  // Interceptor trong client sẽ tự động đính kèm token\r\n  const res = await client.get(\"/orders\");\r\n  return res.data;\r\n};\r\n\r\nexport const updateOrderStatusApi = async (orderId, status) => {\r\n  try {\r\n    // Interceptor trong client sẽ tự động đính kèm token\r\n    const response = await client.patch(`/orders/${orderId}`, { status });\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error(`Error updating order status for order ${orderId}:`, error.response || error);\r\n    throw error.response?.data || new Error('Failed to update order status');\r\n  }\r\n};","import client from \"./client\"; // Sử dụng client axios tập trung\r\n\r\nexport const getAllUserApi = async () => {\r\n  // Interceptor sẽ tự động đính kèm token\r\n  const res = await client.get(`/users`);\r\n  return res.data;\r\n};\r\n\r\nexport const updateUserApi = async (userId, payload) => {\r\n  // Interceptor sẽ tự động đính kèm token\r\n  const res = await client.patch(`/users/${userId}`, payload);\r\n  return res.data;\r\n};","import React, { useEffect, useState } from 'react';\nimport { Grid, Paper, Typography, Box, List, ListItem, ListItemText, Divider, Avatar, CircularProgress, Alert } from '@mui/material';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';\nimport MonetizationOnIcon from '@mui/icons-material/MonetizationOn';\nimport ShoppingCartIcon from '@mui/icons-material/ShoppingCart';\nimport PeopleIcon from '@mui/icons-material/People';\nimport LoginIcon from '@mui/icons-material/Login';\nimport WarningAmberIcon from '@mui/icons-material/WarningAmber';\nimport InventoryIcon from '@mui/icons-material/Inventory';\nimport { getAllOrdersApi } from '../../api/orderApi';\nimport { getAllUserApi } from '../../api/userApi';\nimport { fetchAllProducts } from '../../api/productApi';\nimport { useTranslation } from 'react-i18next';\n\nconst StatCard = ({ icon, title, value, color, loading }) => (\n  <Paper sx={{ p: 2, display: 'flex', alignItems: 'center', height: '100%' }}>\n    <Avatar sx={{ bgcolor: color, mr: 2 }}>\n      {icon}\n    </Avatar>\n    <Box>\n      <Typography color=\"text.secondary\">{title}</Typography>\n      <Typography variant=\"h5\" component=\"p\" fontWeight=\"bold\">\n        {loading ? <CircularProgress size={20} /> : value}\n      </Typography>\n    </Box>\n  </Paper>\n);\n\nconst STATUS_COLORS = {\n  PENDING: '#FFC107', // warning\n  CONFIRMED: '#9C27B0', // secondary\n  PAID: '#03A9F4', // info\n  SHIPPED: '#2196F3', // primary\n  DELIVERED: '#8BC34A', // success-like\n  COMPLETED: '#4CAF50', // success\n  CANCELLED: '#F44336', // error\n  RETURNED: '#607D8B', // blue grey\n  REFUNDED: '#795548', // brown\n  DEFAULT: '#9E9E9E', // default grey\n};\n\n\nconst DashboardPage = () => {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const fetchDashboardData = async () => {\n      try {\n        setLoading(true);\n        const mockRecentOrders = await getAllOrdersApi();\n        const allUsers = await getAllUserApi();\n\n        const thirtyDaysAgo = new Date();\n        thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\n        const newCustomersCount = allUsers.filter(user => {\n          const userCreationDate = new Date(user.createdAt);\n          return user.role === 'USER' && userCreationDate > thirtyDaysAgo;\n        }).length;\n\n        const allProducts = await fetchAllProducts();\n        // Tính tổng số lượng sản phẩm trong kho\n        const totalStock = allProducts.reduce((sum, product) => sum + (product.stockQuantity || 0), 0);\n\n        const lowStockProducts = allProducts\n          .filter(p => p.stockQuantity < 10)\n          .sort((a, b) => a.stockQuantity - b.stockQuantity);\n\n        // Tính toán dữ liệu cho biểu đồ tròn trạng thái đơn hàng\n        const statusCounts = mockRecentOrders.reduce((acc, order) => {\n          acc[order.status] = (acc[order.status] || 0) + 1;\n          return acc;\n        }, {});\n        const orderStatusData = Object.keys(statusCounts).map(status => ({\n          name: status,\n          value: statusCounts[status],\n        }));\n\n        // Tính tổng doanh thu thực tế từ các đơn hàng đã hoàn thành\n        const totalRevenue = mockRecentOrders\n          .filter(order => order.status === 'COMPLETED')\n          .reduce((sum, order) => sum + order.totalAmount, 0);\n\n        const mockSummaryData = {\n          totalRevenue: totalRevenue,\n          totalOrders: mockRecentOrders.length,\n          newCustomers: newCustomersCount,\n          productsInStock: totalStock,\n        };\n        const mockSalesData = [\n          { name: 'T2', sales: 4000 }, { name: 'T3', sales: 3000 },\n          { name: 'T4', sales: 2000 }, { name: 'T5', sales: 2780 },\n          { name: 'T6', sales: 1890 }, { name: 'T7', sales: 2390 },\n          { name: 'CN', sales: 3490 },\n        ];\n        \n        // Giả lập độ trễ của mạng\n        await new Promise(resolve => setTimeout(resolve, 1000));\n\n        // Since getAllOrdersApi now returns an array directly, we use it as is.\n        // We might want to limit the number of recent orders shown on the dashboard.\n        const recentOrders = mockRecentOrders\n          .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\n          .slice(0, 5);\n\n        const recentLogins = allUsers\n          .filter(user => user.lastLogin) // Chỉ lấy user đã từng đăng nhập\n          .sort((a, b) => new Date(b.lastLogin) - new Date(a.lastLogin)) // Sắp xếp mới nhất trước\n          .slice(0, 5); // Lấy 5 user gần nhất\n\n        setData({ summaryData: mockSummaryData, salesData: mockSalesData, recentOrders: recentOrders, lowStockProducts: lowStockProducts, orderStatusData: orderStatusData, recentLogins: recentLogins });\n        setError(null);\n      } catch (err) {\n        console.error(\"Failed to fetch dashboard data:\", err);\n        setError(t('admin.dashboardPage.fetchError'));\n        setData(null); // Clear old data on error\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchDashboardData();\n  }, [t]);\n\n  if (error) {\n    return <Alert severity=\"error\">{error}</Alert>;\n  }\n\n  return (\n    <Box sx={{ flexGrow: 1 }}>\n      <Typography variant=\"h4\" gutterBottom component=\"h1\" fontWeight=\"bold\">\n        {t('admin.dashboardPage.title')}\n      </Typography>\n      <Grid container spacing={3} pb={10}>\n        {/* Summary Cards */}\n        <Grid item xs={12} sm={6} md={3}>\n          <StatCard \n            icon={<MonetizationOnIcon />} \n            title={t('admin.dashboardPage.totalRevenue')}\n            value={data?.summaryData?.totalRevenue ? `$${data.summaryData.totalRevenue.toLocaleString()}` : 'N/A'}\n            color=\"success.main\"\n            loading={loading}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <StatCard \n            icon={<ShoppingCartIcon />} \n            title={t('admin.dashboardPage.totalOrders')}\n            value={data?.summaryData?.totalOrders ?? 'N/A'}\n            color=\"info.main\"\n            loading={loading}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <StatCard \n            icon={<PeopleIcon />} \n            title={t('admin.dashboardPage.newCustomers')}\n            value={data?.summaryData?.newCustomers ?? 'N/A'}\n            color=\"warning.main\"\n            loading={loading}\n          />\n        </Grid>\n        <Grid item xs={12} sm={6} md={3}>\n          <StatCard \n            icon={<InventoryIcon />} \n            title={t('admin.dashboardPage.productsInStock')}\n            value={data?.summaryData?.productsInStock ?? 'N/A'}\n            color=\"error.main\"\n            loading={loading}\n          />\n        </Grid>\n\n        {/* Sales Chart */}\n        <Grid item xs={12} md={8}>\n          <Paper sx={{ p: 2, display: 'flex', flexDirection: 'column', height: 400 }}>\n            <Typography variant=\"h6\" gutterBottom>{t('admin.dashboardPage.weeklyRevenue')}</Typography>\n            {loading ? (\n              <Box sx={{ flexGrow: 1, display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n                <CircularProgress />\n              </Box>\n            ) : (\n            <ResponsiveContainer width=\"100%\" height=\"90%\">\n                <BarChart data={data?.salesData || []} margin={{ top: 5, right: 20, left: -10, bottom: -10 }}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis dataKey=\"name\" />\n                  <YAxis />\n                  <Tooltip />\n                  <Legend />\n                  <Bar dataKey=\"sales\" fill=\"#8884d8\" name={t('admin.dashboardPage.sales')} />\n                </BarChart>\n              </ResponsiveContainer>\n            )}\n          </Paper>\n        </Grid>\n\n        {/* Order Status Pie Chart */}\n        <Grid item xs={12} md={4}>\n          <Paper sx={{ p: 2, display: 'flex', flexDirection: 'column', height: 400 }}>\n            <Typography variant=\"h6\" gutterBottom>{t('admin.dashboardPage.orderStatusRatio')}</Typography>\n            {loading ? <Box sx={{ flexGrow: 1, display: 'flex', justifyContent: 'center', alignItems: 'center' }}><CircularProgress /></Box> : (\n              <Box sx={{ width: '100%', flexGrow: 1 }}>\n                <ResponsiveContainer width=\"100%\" height=\"100%\">\n                  <PieChart>\n                    <Pie\n                      data={data?.orderStatusData || []}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      outerRadius={80}\n                      fill=\"#8884d8\"\n                      dataKey=\"value\"\n                      nameKey=\"name\"\n                    >\n                      {data?.orderStatusData?.map((entry, index) => <Cell key={`cell-${index}`} fill={STATUS_COLORS[entry.name] || STATUS_COLORS.DEFAULT} />)}\n                    </Pie>\n                    <Tooltip />\n                    <Legend />\n                  </PieChart>\n                </ResponsiveContainer>\n              </Box>\n            )}\n          </Paper>\n        </Grid>\n\n        {/* Low Stock Products */}\n        <Grid item xs={12} md={6}>\n          <Paper sx={{ p: 2, height: '100%' }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n              <WarningAmberIcon color=\"warning\" sx={{ mr: 1 }} />\n              <Typography variant=\"h6\" gutterBottom component=\"div\" sx={{ mb: 0 }}>\n                {t('admin.dashboardPage.lowStockProducts')}\n              </Typography>\n            </Box>\n            {loading ? <CircularProgress /> : (\n              <List dense sx={{ maxHeight: 300, overflow: 'auto' }}>\n                {data?.lowStockProducts && data.lowStockProducts.length > 0 ? (\n                  data.lowStockProducts.map(product => (\n                    <ListItem key={product.id} divider>\n                      <ListItemText\n                        primary={product.name}\n                        secondaryTypographyProps={{ color: 'error.main', fontWeight: 'bold' }}\n                        secondary={t('admin.dashboardPage.onlyLeft', { count: product.stockQuantity })}\n                      />\n                    </ListItem>\n                  ))\n                ) : <Typography sx={{ p: 2, color: 'text.secondary' }}>{t('admin.dashboardPage.noLowStockProducts')}</Typography>}\n              </List>\n            )}\n          </Paper>\n        </Grid>\n\n        {/* Recent Logins */}\n        <Grid item xs={12} md={6}>\n          <Paper sx={{ p: 2, height: '100%' }}>\n            <Box sx={{ display: 'flex', alignItems: 'center', mb: 1 }}>\n              <LoginIcon color=\"info\" sx={{ mr: 1 }} />\n              <Typography variant=\"h6\" gutterBottom component=\"div\" sx={{ mb: 0 }}>\n                {t('admin.dashboardPage.recentLogins')}\n              </Typography>\n            </Box>\n            {loading ? <CircularProgress /> : (\n              <List dense sx={{ maxHeight: 300, overflow: 'auto' }}>\n                {data?.recentLogins && data.recentLogins.length > 0 ? (\n                  data.recentLogins.map(user => (\n                    <ListItem key={user.id} divider>\n                      <Avatar sx={{ mr: 2 }} src={user.avatarUrl} />\n                      <ListItemText\n                        primary={user.fullName}\n                        secondary={`${t('admin.dashboardPage.loggedInAt')}${new Date(user.lastLogin).toLocaleString()}`}\n                      />\n                    </ListItem>\n                  ))\n                ) : <Typography sx={{ p: 2, color: 'text.secondary' }}>{t('admin.dashboardPage.noRecentLogins')}</Typography>}\n              </List>\n            )}\n          </Paper>\n        </Grid>\n        {/* Recent Orders */}\n        <Grid item xs={12}>\n          <Paper sx={{ p: 2, height: '100%'}}>\n            <Typography variant=\"h6\" gutterBottom>{t('admin.dashboardPage.recentOrders')}</Typography>\n            {loading ? <CircularProgress /> : (\n            <List dense sx={{ maxHeight: 300, overflow: 'auto' }}>\n              {data?.recentOrders && data.recentOrders.length > 0 ? (\n                data.recentOrders.map((order, index) => (\n                  <React.Fragment key={order.id}>\n                    <ListItem alignItems=\"flex-start\">\n                      <ListItemText\n                        primary={`${t('admin.dashboardPage.order')} #${order.id} - ${order.userName}`}\n                        secondary={`$${order.totalAmount.toFixed(2)} - ${new Date(order.createdAt).toLocaleDateString()}`}\n                      />\n                    </ListItem>\n                    {index < data.recentOrders.length - 1 && <Divider component=\"li\" />}\n                  </React.Fragment>\n                ))\n              ) : (\n                <Typography sx={{ p: 2, color: 'text.secondary' }}>{t('admin.dashboardPage.noRecentOrders')}</Typography>\n              )}\n            </List>\n            )}\n          </Paper>\n        </Grid>\n\n      </Grid>\n    </Box>\n  );\n};\n\nexport default DashboardPage;"],"names":["createOrderApi","async","data","payload","orderItems","item","product","fetchProduct","productId","reduceStockApi","stockQuantity","quantity","error","console","client","post","getMyOrdersApi","userId","params","arguments","length","undefined","get","concat","getAllOrdersApi","updateOrderStatusApi","orderId","status","patch","_error$response","response","Error","getAllUserApi","updateUserApi","StatCard","_ref","icon","title","value","color","loading","_jsxs","Paper","sx","p","display","alignItems","height","children","_jsx","Avatar","bgcolor","mr","Box","Typography","variant","component","fontWeight","CircularProgress","size","STATUS_COLORS","PENDING","CONFIRMED","PAID","SHIPPED","DELIVERED","COMPLETED","CANCELLED","RETURNED","REFUNDED","DEFAULT","DashboardPage","_data$summaryData","_data$summaryData$tot","_data$summaryData2","_data$summaryData$new","_data$summaryData3","_data$summaryData$pro","_data$summaryData4","_data$orderStatusData","setData","useState","setLoading","setError","t","useTranslation","useEffect","mockRecentOrders","allUsers","thirtyDaysAgo","Date","setDate","getDate","newCustomersCount","filter","user","userCreationDate","createdAt","role","allProducts","fetchAllProducts","totalStock","reduce","sum","lowStockProducts","sort","a","b","statusCounts","acc","order","orderStatusData","Object","keys","map","name","mockSummaryData","totalRevenue","totalAmount","totalOrders","newCustomers","productsInStock","mockSalesData","sales","Promise","resolve","setTimeout","recentOrders","slice","recentLogins","lastLogin","summaryData","salesData","err","fetchDashboardData","Alert","severity","flexGrow","gutterBottom","Grid","container","spacing","pb","xs","sm","md","MonetizationOnIcon","toLocaleString","ShoppingCartIcon","PeopleIcon","InventoryIcon","flexDirection","justifyContent","ResponsiveContainer","width","BarChart","margin","top","right","left","bottom","CartesianGrid","strokeDasharray","XAxis","dataKey","YAxis","Tooltip","Legend","Bar","fill","PieChart","Pie","cx","cy","labelLine","outerRadius","nameKey","entry","index","Cell","mb","WarningAmberIcon","List","dense","maxHeight","overflow","ListItem","divider","ListItemText","primary","secondaryTypographyProps","secondary","count","id","LoginIcon","src","avatarUrl","fullName","React","userName","toFixed","toLocaleDateString","Divider"],"ignoreList":[],"sourceRoot":""}