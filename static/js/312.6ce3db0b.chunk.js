"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[312],{3159:(e,a,t)=>{var n=t(4994);a.A=void 0;var r=n(t(39)),i=t(579);a.A=(0,r.default)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},3471:(e,a,t)=>{var n=t(4994);a.A=void 0;var r=n(t(39)),i=t(579);a.A=(0,r.default)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},7531:(e,a,t)=>{t.d(a,{c0:()=>i,jE:()=>r});var n=t(4512);async function r(){try{return(await n.A.get("/categories")).data}catch(e){return console.error("Error fetching categories:",e),[]}}async function i(e){try{return(await n.A.get("/categories/".concat(e,"/products"))).data}catch(a){return console.error("Error fetching products for category ".concat(e,":"),a),[]}}},8312:(e,a,t)=>{t.r(a),t.d(a,{default:()=>F});var n=t(9379),r=t(5043),i=t(3336),s=t(5865),l=t(1906),c=t(6446),o=t(5795),d=t(3193),u=t(8356),h=t(9285),g=t(2143),m=t(1637),x=t(4194),p=t(9650),A=t(1806),j=t(4882),y=t(8076),b=t(2420),v=t(8093),f=t(3460),k=t(1045),P=t(7392),C=t(1574),M=t(35),w=t(6600),W=t(2935),S=t(8903),I=t(9347),D=t(7488),E=(t(2342),t(3159)),z=t(3471),N=t(2554),Q=t(4117),L=t(7531),R=t(579);const U={externalId:"",name:"",authors:"",publisher:"",language:"",isbn:"",categoryId:"",pagesNumber:"",publishYear:"",publishMonth:"",publishDay:"",description:"",imageUrl:"",stockQuantity:"",price:""},F=()=>{const[e,a]=(0,r.useState)([]),[t,F]=(0,r.useState)(!0),[Y,H]=(0,r.useState)(null),[O,q]=(0,r.useState)(!1),[B,V]=(0,r.useState)(U),[G,$]=(0,r.useState)(null),[J,K]=(0,r.useState)({search:"",categoryId:""}),{t:T}=(0,Q.Bd)(),[X,Z]=(0,r.useState)([]),[_,ee]=(0,r.useState)({key:"name",direction:"asc"}),[ae,te]=(0,r.useState)(0),[ne,re]=(0,r.useState)(10),ie=(0,r.useCallback)(async()=>{try{F(!0);const e=await(0,N.j0)({});a(e||[]),H(null)}catch(e){H(T("admin.productManagementPage.fetchError")),a([]),console.error(e)}finally{F(!1)}},[T]);(0,r.useEffect)(()=>{ie();(async()=>{try{const e=await(0,L.jE)();Z(e||[])}catch(e){console.error("Failed to fetch categories:",e)}})()},[ie]);const se=e=>{$(e.id);const a=(0,n.A)((0,n.A)({},U),e);V(a),q(!0)},le=()=>{q(!1),$(null),V(U)},ce=e=>{const{name:a,value:t}=e.target;V(e=>(0,n.A)((0,n.A)({},e),{},{[a]:t}))},oe=e=>{const{name:a,value:t}=e.target;K(e=>(0,n.A)((0,n.A)({},e),{},{[a]:t}))},de=e=>{const a=_.key===e&&"asc"===_.direction;ee({key:e,direction:a?"desc":"asc"})},ue=(0,r.useMemo)(()=>{let a=[...e];return J.search&&(a=a.filter(e=>e.name.toLowerCase().includes(J.search.toLowerCase()))),J.categoryId&&(a=a.filter(e=>e.categoryId===J.categoryId)),null!==_.key&&a.sort((e,a)=>e[_.key]<a[_.key]?"asc"===_.direction?-1:1:e[_.key]>a[_.key]?"asc"===_.direction?1:-1:0),a},[e,J,_]);return(0,R.jsxs)(i.A,{sx:{p:3,m:2},children:[(0,R.jsx)(s.A,{variant:"h4",gutterBottom:!0,children:T("admin.productManagementPage.title")}),(0,R.jsx)(l.A,{variant:"contained",sx:{mb:2},onClick:()=>{$(null),V(U),q(!0)},children:T("admin.productManagementPage.addNewProduct")}),(0,R.jsxs)(c.A,{sx:{display:"flex",gap:2,mb:3},children:[(0,R.jsx)(o.A,{name:"search",label:T("admin.productManagementPage.searchPlaceholder"),variant:"outlined",size:"small",value:J.search,onChange:oe,sx:{flexGrow:1}}),(0,R.jsxs)(d.A,{size:"small",sx:{minWidth:200},children:[(0,R.jsx)(u.A,{children:T("home.categories")}),(0,R.jsxs)(h.A,{name:"categoryId",value:J.categoryId,label:T("home.categories"),onChange:oe,MenuProps:{disableScrollLock:!0},children:[(0,R.jsx)(g.A,{value:"",children:(0,R.jsx)("em",{children:T("admin.productManagementPage.allCategories")})}),X.map(e=>(0,R.jsx)(g.A,{value:e.id,children:e.name},e.id))]})]})]}),t?(0,R.jsx)(c.A,{sx:{display:"flex",justifyContent:"center",my:5},children:(0,R.jsx)(m.A,{})}):Y?(0,R.jsx)(x.A,{severity:"error",children:Y}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(p.A,{children:(0,R.jsxs)(A.A,{stickyHeader:!0,children:[(0,R.jsx)(j.A,{children:(0,R.jsxs)(y.A,{children:[(0,R.jsx)(b.A,{sx:{width:"10%"},children:T("productPage.image")}),(0,R.jsx)(b.A,{sortDirection:"name"===_.key&&_.direction,children:(0,R.jsx)(v.A,{active:"name"===_.key,direction:"name"===_.key?_.direction:"asc",onClick:()=>de("name"),children:T("productPage.name")})}),(0,R.jsx)(b.A,{children:T("productPage.categories")}),(0,R.jsx)(b.A,{align:"right",sortDirection:"price"===_.key&&_.direction,children:(0,R.jsx)(v.A,{active:"price"===_.key,direction:"price"===_.key?_.direction:"asc",onClick:()=>de("price"),children:T("productPage.price")})}),(0,R.jsx)(b.A,{align:"right",sortDirection:"stockQuantity"===_.key&&_.direction,children:(0,R.jsx)(v.A,{active:"stockQuantity"===_.key,direction:"stockQuantity"===_.key?_.direction:"asc",onClick:()=>de("stockQuantity"),children:T("productPage.stockRemaining",{count:""}).replace("{{count}}","").trim()})}),(0,R.jsx)(b.A,{align:"center",children:T("profile.settings")})]})}),(0,R.jsx)(f.A,{children:ue.slice(ae*ne,ae*ne+ne).map(e=>(0,R.jsxs)(y.A,{hover:!0,children:[(0,R.jsx)(b.A,{children:(0,R.jsx)(k.A,{variant:"square",src:e.imageUrl,alt:e.name,sx:{width:56,height:56}})}),(0,R.jsx)(b.A,{onClick:()=>se(e),sx:{cursor:"pointer","&:hover":{color:"primary.main"}},children:e.name}),(0,R.jsx)(b.A,{children:e.categoryName||"N/A"}),(0,R.jsxs)(b.A,{align:"right",children:["$",e.price.toFixed(2)]}),(0,R.jsx)(b.A,{align:"right",children:e.stockQuantity}),(0,R.jsxs)(b.A,{align:"center",children:[(0,R.jsx)(P.A,{color:"primary",onClick:()=>se(e),children:(0,R.jsx)(E.A,{})}),(0,R.jsx)(P.A,{color:"error",children:(0,R.jsx)(z.A,{})})]})]},e.id))})]})}),(0,R.jsx)(C.A,{rowsPerPageOptions:[5,10,25,50],component:"div",count:ue.length,rowsPerPage:ne,page:ae,onPageChange:(e,a)=>{te(a)},onRowsPerPageChange:e=>{re(parseInt(e.target.value,10)),te(0)},SelectProps:{MenuProps:{disableScrollLock:!0,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"}}}})]}),(0,R.jsxs)(M.A,{open:O,onClose:le,maxWidth:"md",fullWidth:!0,disableScrollLock:!0,children:[(0,R.jsx)(w.A,{children:T(G?"admin.userManagementPage.editUser":"admin.productManagementPage.addNewProduct")}),(0,R.jsx)(W.A,{children:(0,R.jsxs)(S.Ay,{container:!0,spacing:2,sx:{mt:1},children:[(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("register.fullName"),name:"name",value:B.name,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.byAuthor",{authors:""}).replace("by ",""),name:"authors",value:B.authors,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.publisher"),name:"publisher",value:B.publisher,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:6,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.language"),name:"language",value:B.language,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.isbn"),name:"isbn",value:B.isbn,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("home.categories")+" ID",name:"categoryId",type:"number",value:B.categoryId,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.pages"),name:"pagesNumber",type:"number",value:B.pagesNumber,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.published")+" Year",name:"publishYear",type:"number",value:B.publishYear,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.published")+" Month",name:"publishMonth",type:"number",value:B.publishMonth,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.published")+" Day",name:"publishDay",type:"number",value:B.publishDay,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.quantity"),name:"stockQuantity",type:"number",value:B.stockQuantity,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.price"),name:"price",type:"number",value:B.price,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,sm:4,children:(0,R.jsx)(o.A,{fullWidth:!0,label:"External ID",name:"externalId",value:B.externalId,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,children:(0,R.jsx)(o.A,{fullWidth:!0,multiline:!0,rows:4,label:T("productPage.description"),name:"description",value:B.description,onChange:ce})}),(0,R.jsx)(S.Ay,{item:!0,xs:12,children:(0,R.jsx)(o.A,{fullWidth:!0,label:T("productPage.image")+" URL",name:"imageUrl",value:B.imageUrl,onChange:ce})})]})}),(0,R.jsxs)(I.A,{children:[(0,R.jsx)(l.A,{onClick:le,children:T("action.cancel")}),(0,R.jsx)(l.A,{onClick:async()=>{try{G?(await(0,N.fP)(G,B),D.oR.success(T("admin.productManagementPage.updateSuccess"))):(await(0,N.M9)(B),D.oR.success(T("admin.productManagementPage.addSuccess"))),le(),ie()}catch(e){console.error("Failed to save product:",e),D.oR.error(T("admin.productManagementPage.saveError"))}},variant:"contained",children:T("action.saveChanges")})]})]})]})}}}]);
//# sourceMappingURL=312.6ce3db0b.chunk.js.map