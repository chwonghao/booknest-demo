"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[585],{728:(e,t,s)=>{var r=s(4994);t.A=void 0;var o=r(s(39)),n=s(579);t.A=(0,o.default)((0,n.jsx)("path",{d:"M7 11v2h10v-2zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"RemoveCircleOutline")},2452:(e,t,s)=>{s.d(t,{A:()=>m});s(5043);var r=s(9252),o=s(2698),n=s(5865),a=s(8446),l=s(8163),i=s(4117),c=s(3639),d=s(579);const m=e=>{let{links:t=[]}=e;const{t:s}=(0,i.Bd)(),m=[{to:"/",label:s("breadcrumbs.home"),icon:(0,d.jsx)(c.A,{sx:{mr:2,fontSize:"inherit"}})},...t];return(0,d.jsx)(r.A,{maxWidth:"lg",sx:{pt:0,pb:{xs:1,md:2}},children:(0,d.jsx)(o.A,{"aria-label":"breadcrumb",children:m.map((e,t)=>t===m.length-1?(0,d.jsxs)(n.A,{color:"text.primary",sx:{display:"flex",alignItems:"center"},children:[e.icon,e.label]},t):(0,d.jsxs)(a.A,{component:l.N_,to:e.to,underline:"hover",color:"inherit",sx:{display:"flex",alignItems:"center"},children:[e.icon,e.label]},t))})})}},2698:(e,t,s)=>{s.d(t,{A:()=>M});var r=s(8168),o=s(8587),n=s(5043),a=s(8387),l=s(8610),i=s(8092),c=s(4535),d=s(8206),m=s(5865),x=s(7266),h=s(9662),p=s(579);const u=(0,h.A)((0,p.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz");var A=s(6236);const y=["slots","slotProps"],g=(0,c.Ay)(A.A,{name:"MuiBreadcrumbCollapsed"})(e=>{let{theme:t}=e;return(0,r.A)({display:"flex",marginLeft:"calc(".concat(t.spacing(1)," * 0.5)"),marginRight:"calc(".concat(t.spacing(1)," * 0.5)")},"light"===t.palette.mode?{backgroundColor:t.palette.grey[100],color:t.palette.grey[700]}:{backgroundColor:t.palette.grey[700],color:t.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,r.A)({},"light"===t.palette.mode?{backgroundColor:t.palette.grey[200]}:{backgroundColor:t.palette.grey[600]}),"&:active":(0,r.A)({boxShadow:t.shadows[0]},"light"===t.palette.mode?{backgroundColor:(0,x.tL)(t.palette.grey[200],.12)}:{backgroundColor:(0,x.tL)(t.palette.grey[600],.12)})})}),j=(0,c.Ay)(u)({width:24,height:16});const f=function(e){const{slots:t={},slotProps:s={}}=e,n=(0,o.A)(e,y),a=e;return(0,p.jsx)("li",{children:(0,p.jsx)(g,(0,r.A)({focusRipple:!0},n,{ownerState:a,children:(0,p.jsx)(j,(0,r.A)({as:t.CollapsedIcon,ownerState:a},s.collapsedIcon))}))})};var v=s(2532),b=s(2372);function C(e){return(0,b.Ay)("MuiBreadcrumbs",e)}const k=(0,v.A)("MuiBreadcrumbs",["root","ol","li","separator"]),S=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],I=(0,c.Ay)(m.A,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{["& .".concat(k.li)]:t.li},t.root]})({}),w=(0,c.Ay)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),z=(0,c.Ay)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8});function B(e,t,s,r){return e.reduce((o,n,a)=>(a<e.length-1?o=o.concat(n,(0,p.jsx)(z,{"aria-hidden":!0,className:t,ownerState:r,children:s},"separator-".concat(a))):o.push(n),o),[])}const M=n.forwardRef(function(e,t){const s=(0,d.b)({props:e,name:"MuiBreadcrumbs"}),{children:c,className:m,component:x="nav",slots:h={},slotProps:u={},expandText:A="Show path",itemsAfterCollapse:y=1,itemsBeforeCollapse:g=1,maxItems:j=8,separator:v="/"}=s,b=(0,o.A)(s,S),[k,z]=n.useState(!1),M=(0,r.A)({},s,{component:x,expanded:k,expandText:A,itemsAfterCollapse:y,itemsBeforeCollapse:g,maxItems:j,separator:v}),R=(e=>{const{classes:t}=e;return(0,l.A)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},C,t)})(M),N=(0,i.A)({elementType:h.CollapsedIcon,externalSlotProps:u.collapsedIcon,ownerState:M}),W=n.useRef(null),L=n.Children.toArray(c).filter(e=>n.isValidElement(e)).map((e,t)=>(0,p.jsx)("li",{className:R.li,children:e},"child-".concat(t)));return(0,p.jsx)(I,(0,r.A)({ref:t,component:x,color:"text.secondary",className:(0,a.A)(R.root,m),ownerState:M},b,{children:(0,p.jsx)(w,{className:R.ol,ref:W,ownerState:M,children:B(k||j&&L.length<=j?L:(e=>g+y>=e.length?e:[...e.slice(0,g),(0,p.jsx)(f,{"aria-label":A,slots:{CollapsedIcon:h.CollapsedIcon},slotProps:{collapsedIcon:N},onClick:()=>{z(!0);const e=W.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...e.slice(e.length-y,e.length)])(L),R.separator,v,M)})}))})},3639:(e,t,s)=>{var r=s(4994);t.A=void 0;var o=r(s(39)),n=s(579);t.A=(0,o.default)((0,n.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home")},4783:(e,t,s)=>{var r=s(4994);t.A=void 0;var o=r(s(39)),n=s(579);t.A=(0,o.default)((0,n.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"AddCircleOutline")},6585:(e,t,s)=>{s.r(t),s.d(t,{default:()=>B});var r=s(9379),o=s(5043),n=s(9252),a=s(8903),l=s(3336),i=s(5865),c=s(9336),d=s(6446),m=s(1637),x=s(1906),h=s(4117),p=s(1334),u=s(8163),A=s(2603),y=s(8446),g=s(7392),j=s(5795),f=s(4783),v=s(728),b=s(7884),C=s(579);const k=e=>{let{item:t}=e;const{t:s,i18n:r}=(0,h.Bd)(),{updateQty:n,deleteItem:c}=(0,o.useContext)(A.M),m=e=>{const s=t.qty+e;s>0&&s<=t.stockQuantity&&n(t.id,s)},x=e=>{if(null===e||void 0===e)return"";if("vi"===r.language.split("-")[0]){return"".concat((25e3*e).toLocaleString("vi-VN")," \u20ab")}return"$".concat(e.toFixed(2))};return(0,C.jsx)(l.A,{elevation:2,sx:{p:2,mb:2},children:(0,C.jsxs)(a.Ay,{container:!0,spacing:2,alignItems:"center",children:[(0,C.jsx)(a.Ay,{item:!0,xs:3,sm:2,children:(0,C.jsx)(y.A,{component:u.N_,to:"/products/".concat(t.id),children:(0,C.jsx)(d.A,{component:"img",src:t.imageUrl,alt:t.name,sx:{width:"100%",height:"auto",aspectRatio:"2/3",objectFit:"cover",borderRadius:1}})})}),(0,C.jsxs)(a.Ay,{item:!0,xs:9,sm:5,children:[(0,C.jsx)(i.A,{variant:"h6",component:"div",fontWeight:"bold",children:(0,C.jsx)(y.A,{component:u.N_,to:"/products/".concat(t.id),color:"inherit",sx:{textDecoration:"none"},children:t.name})}),(0,C.jsx)(i.A,{variant:"body2",color:"text.secondary",children:Array.isArray(t.authors)&&t.authors.length>0?t.authors.map(e=>e.name).join(", "):""}),(0,C.jsx)(i.A,{variant:"h6",color:"primary.main",sx:{mt:1},children:x(t.price)})]}),(0,C.jsxs)(a.Ay,{item:!0,xs:9,sm:3,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,C.jsx)(g.A,{onClick:()=>m(-1),disabled:t.qty<=1,size:"small",children:(0,C.jsx)(v.A,{})}),(0,C.jsx)(j.A,{value:t.qty,onChange:e=>(e=>{const s=parseInt(e,10);!isNaN(s)&&s>0&&s<=t.stockQuantity&&n(t.id,s)})(e.target.value),size:"small",sx:{width:"60px",mx:1,"& input":{textAlign:"center"}},inputProps:{min:1,max:t.stockQuantity}}),(0,C.jsx)(g.A,{onClick:()=>m(1),disabled:t.qty>=t.stockQuantity,size:"small",children:(0,C.jsx)(f.A,{})})]}),(0,C.jsxs)(a.Ay,{item:!0,xs:3,sm:2,sx:{textAlign:"right"},children:[(0,C.jsx)(i.A,{variant:"h6",fontWeight:"bold",children:x(t.price*t.qty)}),(0,C.jsx)(g.A,{onClick:()=>c(t.id),color:"error",size:"small",sx:{mt:1},title:s("cart.removeItem"),children:(0,C.jsx)(b.A,{})})]})]})})};var S=s(5187),I=s(7488),w=s(2452),z=s(2554);const B=()=>{const{t:e,i18n:t}=(0,h.Bd)(),{items:s,total:y,cartCount:g}=(0,o.useContext)(A.M),{isAuthenticated:j}=(0,o.useContext)(S.c),f=(0,u.Zp)(),[v,b]=(0,o.useState)(!1),[B,M]=(0,o.useState)(!0),[R,N]=(0,o.useState)([]),[W,L]=(0,o.useState)([]),[P,q]=(0,o.useState)(!1),Q=e=>{if(null===e||void 0===e)return"";if("vi"===t.language.split("-")[0]){return"".concat((25e3*e).toLocaleString("vi-VN")," \u20ab")}return"$".concat(e.toFixed(2))};(0,o.useEffect)(()=>{(async()=>{if(0===s.length)return N([]),L([]),M(!1),void q(!0);M(!0);try{const e=s.map(e=>(0,z.yj)(e.id)),t=await Promise.all(e),o=[],n=[];let a=!1;s.forEach((e,s)=>{const l=t[s],i=(0,r.A)((0,r.A)({},e),l);0===l.stockQuantity?n.push(i):(o.push(i),e.qty>l.stockQuantity&&(a=!0))}),N(o),L(n),q(a||0===o.length)}catch(e){console.error("Failed to fetch product details for cart:",e),I.oR.error("Could not verify item stock. Please try again."),q(!0)}finally{M(!1)}})()},[s]);return(0,C.jsxs)(n.A,{maxWidth:"lg",children:[(0,C.jsx)(w.A,{links:[{label:e("breadcrumbs.cart")}],sx:{my:3}}),(0,C.jsxs)(a.Ay,{container:!0,spacing:4,children:[(0,C.jsx)(a.Ay,{item:!0,xs:12,md:8,children:(0,C.jsxs)(l.A,{elevation:0,variant:"outlined",sx:{p:{xs:2,md:3},borderRadius:2},children:[(0,C.jsxs)(i.A,{variant:"h5",component:"h1",gutterBottom:!0,display:"flex",alignItems:"center",fontWeight:"bold",children:[(0,C.jsx)(p.A,{sx:{mr:2}})," ",e("cart.title")," (",e("cart.itemCount",{count:g}),")"]}),(0,C.jsx)(c.A,{sx:{my:3}}),B?(0,C.jsx)(d.A,{sx:{display:"flex",justifyContent:"center",py:8},children:(0,C.jsx)(m.A,{})}):0===s.length?(0,C.jsxs)(d.A,{sx:{textAlign:"center",py:8},children:[(0,C.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:e("cart.empty.title")}),(0,C.jsx)(i.A,{color:"text.secondary",mb:3,children:e("cart.empty.subtitle")}),(0,C.jsx)(x.A,{component:u.N_,to:"/",variant:"contained",color:"primary",children:e("cart.continueShopping")})]}):(0,C.jsxs)(d.A,{children:[R.map(e=>(0,C.jsx)(k,{item:e,isStockIssue:e.qty>e.stockQuantity},e.id)),W.length>0&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(c.A,{sx:{my:4},children:(0,C.jsx)(i.A,{variant:"h6",color:"text.secondary",children:e("cart.unavailableItems")})}),W.map(e=>(0,C.jsx)(k,{item:e,isOutOfStock:!0},e.id))]})]})]})}),(0,C.jsx)(a.Ay,{item:!0,xs:12,md:4,children:(0,C.jsxs)(l.A,{elevation:0,variant:"outlined",sx:{p:3,position:"sticky",top:88,borderRadius:2},children:[(0,C.jsx)(i.A,{variant:"h6",gutterBottom:!0,fontWeight:"bold",children:e("cart.summary.title")}),(0,C.jsx)(c.A,{sx:{my:2}}),(0,C.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[(0,C.jsx)(i.A,{color:"text.secondary",children:e("cart.summary.subtotal",{count:g})}),(0,C.jsx)(i.A,{fontWeight:"bold",children:Q(y)})]}),(0,C.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,C.jsx)(i.A,{color:"text.secondary",children:e("cart.summary.shipping")}),(0,C.jsx)(i.A,{fontWeight:"bold",children:e("cart.summary.free")})]}),(0,C.jsx)(c.A,{sx:{my:2}}),(0,C.jsxs)(d.A,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[(0,C.jsx)(i.A,{variant:"h5",fontWeight:"bold",children:e("cart.summary.total")}),(0,C.jsx)(i.A,{variant:"h5",fontWeight:"bold",children:Q(y)})]}),(0,C.jsx)(x.A,{fullWidth:!0,variant:"contained",color:"primary",size:"large",onClick:()=>{b(!0),j?f("/checkout"):f("/login",{state:{from:"/checkout",message:e("cart.summary.loginPrompt")}})},disabled:P||v||B,sx:{display:"flex",alignItems:"center",gap:1},children:v?(0,C.jsx)(m.A,{size:24,color:"inherit"}):e("cart.proceedToCheckout")})]})})]})]})}},7884:(e,t,s)=>{var r=s(4994);t.A=void 0;var o=r(s(39)),n=s(579);t.A=(0,o.default)((0,n.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zm2.46-7.12 1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14zM15.5 4l-1-1h-5l-1 1H5v2h14V4z"}),"DeleteForever")}}]);
//# sourceMappingURL=585.4fcd985e.chunk.js.map