"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[325],{1325:(t,e,r)=>{r.r(e),r.d(e,{default:()=>w});var s=r(5043),n=r(8163),a=r(6446),i=r(5865),o=r(611),l=r(1637),c=r(4194),d=r(3336),x=r(8903),u=r(8911),h=r(6682),g=r(9336),p=r(3845),m=r(7392),y=r(5795),j=r(1906),A=r(9007),v=r(4117),b=r(2554),f=r(2452),k=r(2603),P=r(7488),I=r(579);const w=()=>{var t,e,r;const w=t=>{let{product:e}=t;const{t:r}=(0,v.Bd)(),s=[{star:5,value:e.ratingDist5},{star:4,value:e.ratingDist4},{star:3,value:e.ratingDist3},{star:2,value:e.ratingDist2},{star:1,value:e.ratingDist1}],n=t=>parseInt((null===t||void 0===t?void 0:t.split(":")[1])||0,10),l=n(e.ratingDistTotal);return 0===l?null:(0,I.jsx)(a.A,{children:s.map(t=>{const e=n(t.value),s=l>0?e/l*100:0;return(0,I.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",mb:.5,cursor:"pointer","&:hover":{bgcolor:"action.hover"},borderRadius:1,p:.5},children:[(0,I.jsx)(i.A,{variant:"body2",sx:{width:"55px",color:"text.secondary"},children:r("productPage.stars",{count:t.star})}),(0,I.jsx)(a.A,{sx:{flexGrow:1,mx:1},children:(0,I.jsx)(o.A,{variant:"determinate",value:s,sx:{height:10,borderRadius:5}})}),(0,I.jsx)(i.A,{variant:"body2",color:"text.secondary",sx:{width:"90px",textAlign:"right"},children:e.toLocaleString()})]},t.star)})})},{id:S}=(0,n.g)(),{t:C,i18n:D}=(0,v.Bd)(),{addItem:Q}=(0,s.useContext)(k.M),[B,N]=(0,s.useState)(null),[R,z]=(0,s.useState)(!0),[F,L]=(0,s.useState)(null),[T,W]=(0,s.useState)(1);(0,s.useEffect)(()=>{(async()=>{try{z(!0);const t=await(0,b.yj)(S);N(t),L(null)}catch(t){L(C("productPage.fetchError")),N(null)}finally{z(!1)}})()},[S,C]);const O=t=>{const e=T+t;e>0&&e<=B.stockQuantity&&W(e)};if(R)return(0,I.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh"},children:(0,I.jsx)(l.A,{})});if(F)return(0,I.jsx)(c.A,{severity:"error",sx:{mt:4},children:F});if(!B)return(0,I.jsx)(c.A,{severity:"info",sx:{mt:4},children:C("productPage.notFound")});const E=B.stockQuantity>0?{label:C("productPage.inStock"),color:"success"}:{label:C("productPage.outOfStock"),color:"error"};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(f.A,{links:[{to:"/products?category=".concat(B.categoryId),label:B.categoryName},{label:B.name}]}),(0,I.jsx)(d.A,{sx:{p:{xs:2,md:4},mt:0},children:(0,I.jsxs)(x.Ay,{container:!0,spacing:4,children:[(0,I.jsx)(x.Ay,{item:!0,xs:12,md:4,children:(0,I.jsx)(a.A,{component:"img",sx:{width:"100%",height:"auto",maxHeight:{xs:400,md:500},objectFit:"contain",border:"1px solid #ddd",borderRadius:2},alt:B.name,src:B.imageUrl||"https://via.placeholder.com/400x600.png?text=".concat(encodeURIComponent(B.name))})}),(0,I.jsxs)(x.Ay,{item:!0,xs:12,md:8,children:[(0,I.jsx)(i.A,{variant:"h4",component:"h1",gutterBottom:!0,fontWeight:"bold",children:B.name}),(0,I.jsx)(i.A,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:C("productPage.byAuthor",{authors:B.authors})}),(0,I.jsx)(i.A,{variant:"body1",paragraph:!0,sx:{whiteSpace:"pre-wrap"},children:B.description}),(0,I.jsxs)(x.Ay,{container:!0,spacing:2,sx:{my:1},children:[(0,I.jsx)(x.Ay,{item:!0,xs:"auto",children:(0,I.jsxs)(u.A,{alignItems:"center",children:[(0,I.jsx)(i.A,{variant:"h3",fontWeight:"bold",children:null===(t=B.rating)||void 0===t?void 0:t.toFixed(2)}),(0,I.jsx)(h.A,{name:"read-only",value:B.rating||0,precision:.1,readOnly:!0,size:"large"}),(0,I.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:[parseInt((null===(e=B.ratingDistTotal)||void 0===e?void 0:e.split(":")[1])||0,10).toLocaleString()," ",C("productPage.ratings")]}),(0,I.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:[null===(r=B.countsOfReview)||void 0===r?void 0:r.toLocaleString()," ",C("productPage.reviews")]})]})}),(0,I.jsxs)(x.Ay,{item:!0,xs:!0,children:[(0,I.jsx)(i.A,{variant:"h6",gutterBottom:!0,children:C("productPage.ratingDistribution")}),(0,I.jsx)(w,{product:B})]})]}),(0,I.jsx)(g.A,{sx:{my:2}}),(0,I.jsx)(i.A,{variant:"h4",color:"primary.main",fontWeight:"bold",gutterBottom:!0,children:(t=>{if("vi"===D.language.split("-")[0]){return"".concat((25e3*t).toLocaleString("vi-VN")," \u20ab")}return"$".concat(null===t||void 0===t?void 0:t.toFixed(2))})(B.price)}),(0,I.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[(0,I.jsx)(p.A,{label:E.label,color:E.color}),B.stockQuantity>0&&(0,I.jsx)(i.A,{variant:"body2",color:"text.secondary",children:C("productPage.stockRemaining",{count:B.stockQuantity})})]}),B.stockQuantity>0&&(0,I.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",my:2},children:[(0,I.jsxs)(i.A,{sx:{mr:2},children:[C("productPage.quantity"),":"]}),(0,I.jsx)(m.A,{onClick:()=>O(-1),disabled:T<=1,size:"small",children:(0,I.jsx)(i.A,{variant:"h6",children:"-"})}),(0,I.jsx)(y.A,{value:T,onChange:t=>{const e=parseInt(t.target.value,10);!isNaN(e)&&e>0&&e<=B.stockQuantity?W(e):""===t.target.value&&W("")},size:"small",sx:{width:"60px",mx:1,"& input":{textAlign:"center"}},inputProps:{min:1,max:B.stockQuantity}}),(0,I.jsx)(m.A,{onClick:()=>O(1),disabled:T>=B.stockQuantity,size:"small",children:(0,I.jsx)(i.A,{variant:"h6",children:"+"})})]}),(0,I.jsx)(j.A,{variant:"contained",color:"primary",size:"large",startIcon:(0,I.jsx)(A.A,{}),onClick:()=>{B&&(Q(B,T),P.oR.success(C("product.addedToCart",{name:B.name})))},disabled:0===B.stockQuantity||!T,sx:{mt:2,px:5,py:1.5},children:C("productPage.addToCart")}),(0,I.jsx)(g.A,{sx:{my:3}}),(0,I.jsxs)(a.A,{children:[(0,I.jsxs)(i.A,{variant:"subtitle2",color:"text.secondary",children:[C("productPage.publisher"),": ",B.publisher]}),(0,I.jsxs)(i.A,{variant:"subtitle2",color:"text.secondary",children:[C("productPage.published"),": ",B.publishDay,"/",B.publishMonth,"/",B.publishYear]}),(0,I.jsxs)(i.A,{variant:"subtitle2",color:"text.secondary",children:[C("productPage.pages"),": ",B.pagesNumber]}),(0,I.jsxs)(i.A,{variant:"subtitle2",color:"text.secondary",children:[C("productPage.language"),": ",B.language]}),(0,I.jsxs)(i.A,{variant:"subtitle2",color:"text.secondary",children:[C("productPage.isbn"),": ",B.isbn||"N/A"]})]})]})]})})]})}},2452:(t,e,r)=>{r.d(e,{A:()=>x});r(5043);var s=r(9252),n=r(2698),a=r(5865),i=r(8446),o=r(8163),l=r(4117),c=r(3639),d=r(579);const x=t=>{let{links:e=[]}=t;const{t:r}=(0,l.Bd)(),x=[{to:"/",label:r("breadcrumbs.home"),icon:(0,d.jsx)(c.A,{sx:{mr:2,fontSize:"inherit"}})},...e];return(0,d.jsx)(s.A,{maxWidth:"lg",sx:{pt:0,pb:{xs:1,md:2}},children:(0,d.jsx)(n.A,{"aria-label":"breadcrumb",children:x.map((t,e)=>e===x.length-1?(0,d.jsxs)(a.A,{color:"text.primary",sx:{display:"flex",alignItems:"center"},children:[t.icon,t.label]},e):(0,d.jsxs)(i.A,{component:o.N_,to:t.to,underline:"hover",color:"inherit",sx:{display:"flex",alignItems:"center"},children:[t.icon,t.label]},e))})})}}}]);
//# sourceMappingURL=325.56ca1d1b.chunk.js.map