"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[838],{6596:(e,t,o)=>{o.d(t,{A:()=>A});var n=o(5043),i=o(2110),r=o(2828),a=o(6446),s=o(6591),c=o(3845),l=o(6494),d=o(5865),h=o(1906),u=o(4117),x=o(3282),p=o(9007),m=o(8163),g=o(2603),y=o(7488),j=o(579);const A=e=>{let{product:t,showAddToCartButton:o=!0}=e;const{t:A,i18n:f}=(0,u.Bd)(),{addItem:b}=(0,n.useContext)(g.M),w=t.originalPrice?Math.round((t.originalPrice-t.price)/t.originalPrice*100):0,v=0===t.stockQuantity,B=e=>{if(null===e||void 0===e)return"";if("vi"===f.language.split("-")[0]){return"".concat((25e3*e).toLocaleString("vi-VN")," \u20ab")}return"$".concat(e.toFixed(2))};return(0,j.jsxs)(i.A,{sx:{height:"100%",display:"flex",flexDirection:"column",opacity:v?.6:1,position:"relative"},children:[(0,j.jsxs)(r.A,{component:m.N_,to:"/products/".concat(t.id),sx:{flexGrow:1},children:[(0,j.jsxs)(a.A,{sx:{position:"relative"},children:[(0,j.jsx)(s.A,{component:"img",height:"240",image:t.imageUrl,alt:t.name}),w>0&&(0,j.jsx)(c.A,{label:"-".concat(w,"%"),color:"secondary",size:"small",sx:{position:"absolute",top:8,right:8,fontWeight:"bold"}}),v&&(0,j.jsx)(c.A,{label:A("product.outOfStock"),color:"error",size:"small",sx:{position:"absolute",top:8,left:8,fontWeight:"bold"}})]}),(0,j.jsxs)(l.A,{children:[(0,j.jsx)(d.A,{gutterBottom:!0,variant:"h6",component:"div",noWrap:!0,title:t.name,children:t.name}),(0,j.jsx)(d.A,{variant:"body2",color:"text.secondary",mb:1,children:Array.isArray(t.authors)&&t.authors.length>0?t.authors.map(e=>e.name).join(", "):A("product.unknownAuthor")}),(0,j.jsxs)(a.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,j.jsx)(d.A,{variant:"h5",color:"primary.main",fontWeight:"bold",children:B(t.price)}),w>0&&(0,j.jsx)(d.A,{variant:"body2",sx:{textDecoration:"line-through"},color:"text.secondary",children:B(t.originalPrice)})]})]})]}),o&&(0,j.jsx)(a.A,{sx:{p:2,pt:0},children:(0,j.jsx)(h.A,{fullWidth:!0,variant:"contained",color:"primary",startIcon:v?(0,j.jsx)(x.A,{}):(0,j.jsx)(p.A,{}),onClick:e=>{e.preventDefault(),e.stopPropagation(),b(t),y.oR.success(A("product.addedToCart",{name:t.name}))},disabled:v,sx:{bgcolor:v?"grey.400":"primary.main"},children:A(v?"product.outOfStock":"product.addToCart")})})]})}},6642:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});var n=o(9379),i=o(5043),r=o(9252),a=o(6446),s=o(5865),c=o(1637),l=o(4117),d=o(4975),h=o(7072),u=(o(4014),o(3874),o(5084),o(2554)),x=o(7531),p=o(3336),m=o(579);const g=()=>{const{t:e}=(0,l.Bd)();return(0,m.jsx)(a.A,{mb:4,children:(0,m.jsx)(d.RC,{modules:[h.Vx,h.dK,h.Ij],spaceBetween:30,slidesPerView:1,navigation:!0,pagination:{clickable:!0},autoplay:{delay:3500},loop:!0,children:[...Array(3)].map((t,o)=>(0,m.jsx)(d.qr,{children:(0,m.jsx)(p.A,{elevation:3,sx:{height:350,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:2,background:"linear-gradient(45deg, #0D7EBE 30%, #65A9D7 90%)",color:"white"},children:(0,m.jsxs)(s.A,{variant:"h3",component:"h2",fontWeight:"bold",children:[e("home.promotionBanner")," ",o+1]})})},o))})})};var y=o(8903),j=o(2828),A=o(2500),f=o(8163);const b=()=>{const{t:e}=(0,l.Bd)(),[t,o]=(0,i.useState)([]);return(0,i.useEffect)(()=>{(async()=>{try{const e=await(0,x.jE)();o(e.slice(0,8))}catch(e){console.error("Failed to fetch categories:",e)}})()},[]),(0,m.jsxs)(a.A,{mb:5,children:[(0,m.jsx)(s.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:e("home.categories")}),(0,m.jsx)(y.Ay,{container:!0,spacing:2,children:t.map(e=>(0,m.jsx)(y.Ay,{item:!0,xs:6,sm:4,md:3,lg:1.5,sx:{display:"flex"},children:(0,m.jsx)(j.A,{component:f.N_,to:"/products?category=".concat(e.id),sx:{borderRadius:1,height:"100%"},children:(0,m.jsxs)(p.A,{elevation:1,sx:{p:2,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",transition:"box-shadow 0.3s","&:hover":{boxShadow:3}},children:[(0,m.jsx)(A.A,{color:"primary",sx:{fontSize:40,mb:1}}),(0,m.jsx)(s.A,{variant:"subtitle1",component:"h3",align:"center",sx:{color:"text.primary"},children:e.name})]})})},e.id))})]})};var w=o(6596),v=o(1906);const B=e=>{let{category:t,showAddToCartButton:o=!0}=e;const[n,r]=(0,i.useState)([]),[l,d]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{try{d(!0);const e=(await(0,u.j0)({categoryId:t.id,limit:4})||[]).sort((e,t)=>e.stockQuantity>0&&0===t.stockQuantity?-1:0===e.stockQuantity&&t.stockQuantity>0?1:0);r(e)}catch(e){console.error("Failed to fetch products for category ".concat(t.name,":"),e),r([])}finally{d(!1)}})()},[t]),l?(0,m.jsx)(c.A,{sx:{display:"block",margin:"auto",my:4}}):0===n.length?null:(0,m.jsxs)(a.A,{component:"section",sx:{mb:5},children:[(0,m.jsxs)(a.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,m.jsx)(s.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:t.name}),(0,m.jsx)(v.A,{component:f.N_,to:"/products?category=".concat(t.id),children:"Xem th\xeam"})]}),(0,m.jsx)(y.Ay,{container:!0,spacing:3,children:n.map(e=>(0,m.jsx)(y.Ay,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,m.jsx)(w.A,{product:e,showAddToCartButton:o})},e.id))})]})},k=()=>{const{t:e}=(0,l.Bd)(),[t,o]=(0,i.useState)([]),[p,y]=(0,i.useState)([]),[j,A]=(0,i.useState)(!0),[f,v]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{try{A(!0);const e=(await(0,u.j0)({type:"featured"})).filter(e=>e.stockQuantity>0).map(e=>(0,n.A)((0,n.A)({},e),{},{originalPrice:e.price&&e.price>0?Math.round(1.25*e.price):0}));o(e),v(null)}catch(e){v(e.message),o([])}finally{A(!1)}})();(async()=>{try{const e=await(0,x.jE)();y(e)}catch(f){console.error("Failed to fetch categories on HomePage:",f)}})()},[]),(0,m.jsxs)(r.A,{maxWidth:"lg",children:[(0,m.jsx)(g,{}),(0,m.jsx)(b,{}),(0,m.jsxs)(a.A,{component:"section",sx:{mb:5},children:[(0,m.jsx)(s.A,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:e("home.featuredBooks")}),j&&(0,m.jsx)(c.A,{}),f&&(0,m.jsx)(s.A,{color:"error",align:"center",children:f}),(0,m.jsx)(a.A,{sx:{"& .swiper":{overflow:"visible"},"& .swiper-pagination":{bottom:"-25px"},"& .swiper-pagination-bullet-active":{backgroundColor:"primary.main"}},children:(0,m.jsx)(d.RC,{modules:[h.Vx,h.dK,h.Ij],spaceBetween:24,slidesPerView:4,navigation:!0,pagination:{clickable:!0},autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,breakpoints:{320:{slidesPerView:1,spaceBetween:10},600:{slidesPerView:2,spaceBetween:15},900:{slidesPerView:3,spaceBetween:20},1200:{slidesPerView:4,spaceBetween:24}},children:t.map(e=>(0,m.jsx)(d.qr,{style:{height:"auto"},children:(0,m.jsx)(w.A,{product:e,showAddToCartButton:!1})},e.id))})})]}),p.map(e=>(0,m.jsx)(B,{category:e,showAddToCartButton:!1},e.id))]})}},7531:(e,t,o)=>{o.d(t,{c0:()=>s,jE:()=>a});var n=o(2554);const i=[{id:1,name:"L\u1ecbch s\u1eed"},{id:2,name:"Ti\u1ec3u thuy\u1ebft"},{id:3,name:"K\u1ef9 n\u0103ng s\u1ed1ng"},{id:4,name:"Khoa h\u1ecdc"},{id:5,name:"Kinh t\u1ebf"}],r=e=>new Promise(t=>setTimeout(t,e));async function a(){return await r(300),console.log("MOCK: fetchCategories"),[...i]}async function s(e){return await r(500),console.log("MOCK: fetchProductsByCategory",{id:e}),(0,n.j0)({categoryId:e})}}}]);
//# sourceMappingURL=838.b1b4bc24.chunk.js.map