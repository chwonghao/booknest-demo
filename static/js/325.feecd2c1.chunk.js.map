{"version":3,"file":"static/js/325.feecd2c1.chunk.js","mappings":"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","sources":["pages/ProductPage.jsx","components/BreadcrumbsComponent.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Box, Typography, Grid, Button, Chip, CircularProgress, Alert, Paper, Divider, Rating, TextField, IconButton, LinearProgress, Stack } from '@mui/material';\nimport AddShoppingCartIcon from '@mui/icons-material/AddShoppingCart';\nimport { useTranslation } from 'react-i18next';\nimport { fetchProduct } from '../api/productApi';\nimport BreadcrumbsComponent from '../components/BreadcrumbsComponent';\nimport { CartContext } from '../context/CartContext';\nimport { toast } from 'react-toastify';\n\nconst ProductPage = () => {\n  // --- Component con để hiển thị chi tiết đánh giá ---\n  const RatingSummary = ({ product }) => {\n    const { t } = useTranslation();\n    const ratingData = [\n      { star: 5, value: product.ratingDist5 },\n      { star: 4, value: product.ratingDist4 },\n      { star: 3, value: product.ratingDist3 },\n      { star: 2, value: product.ratingDist2 },\n      { star: 1, value: product.ratingDist1 },\n    ];\n\n    const getCount = (dist) => parseInt(dist?.split(':')[1] || 0, 10);\n\n    const totalRatings = getCount(product.ratingDistTotal);\n\n    if (totalRatings === 0) return null;\n\n    return (\n      <Box>\n        {ratingData.map(item => {\n          const count = getCount(item.value);\n          const percentage = totalRatings > 0 ? (count / totalRatings) * 100 : 0;\n          return (\n            <Box key={item.star} sx={{ display: 'flex', alignItems: 'center', mb: 0.5, cursor: 'pointer', '&:hover': { bgcolor: 'action.hover' }, borderRadius: 1, p: 0.5 }}>\n              <Typography variant=\"body2\" sx={{ width: '55px', color: 'text.secondary' }}>{t('productPage.stars', { count: item.star })}</Typography>\n              <Box sx={{ flexGrow: 1, mx: 1 }}>\n                <LinearProgress\n                  variant=\"determinate\"\n                  value={percentage}\n                  sx={{ height: 10, borderRadius: 5 }}\n                />\n              </Box>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ width: '90px', textAlign: 'right' }}>\n                {count.toLocaleString()}\n              </Typography>\n            </Box>\n          );\n        })}\n      </Box>\n    );\n  };\n\n  const { id: productId } = useParams();\n  const { t, i18n } = useTranslation();\n  const { addItem } = useContext(CartContext);\n\n  const [product, setProduct] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [quantity, setQuantity] = useState(1);\n\n  useEffect(() => {\n    const getProduct = async () => {\n      try {\n        setLoading(true);\n        const data = await fetchProduct(productId);\n        setProduct(data);\n        setError(null);\n      } catch (err) {\n        setError(t('productPage.fetchError'));\n        setProduct(null);\n      } finally {\n        setLoading(false);\n      }\n    };\n    getProduct();\n  }, [productId, t]);\n\n  const handleAddToCart = () => {\n    if (product) {\n      addItem(product, quantity);\n      toast.success(t('product.addedToCart', { name: product.name }));\n    }\n  };\n  const formatPrice = (price) => {\n    const currentLang = i18n.language.split('-')[0];\n    if (currentLang === 'vi') {\n      // Tạm thời giả định tỉ giá 1 USD = 25,000 VND.\n      // Bạn nên thay thế bằng một giải pháp lấy tỉ giá thực tế.\n      const vndPrice = price * 25000;\n      return `${vndPrice.toLocaleString('vi-VN')} ₫`;\n    }\n    return `$${price?.toFixed(2)}`;\n  };\n  const handleQuantityChange = (e) => {\n    const value = parseInt(e.target.value, 10);\n    if (!isNaN(value) && value > 0 && value <= product.stockQuantity) {\n      setQuantity(value);\n    } else if (e.target.value === '') {\n      setQuantity('');\n    }\n  };\n\n  const adjustQuantity = (amount) => {\n    const newQuantity = quantity + amount;\n    if (newQuantity > 0 && newQuantity <= product.stockQuantity) {\n      setQuantity(newQuantity);\n    }\n  };\n\n  if (loading) {\n    return <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', height: '60vh' }}><CircularProgress /></Box>;\n  }\n\n  if (error) {\n    return <Alert severity=\"error\" sx={{ mt: 4 }}>{error}</Alert>;\n  }\n\n  if (!product) {\n    return <Alert severity=\"info\" sx={{ mt: 4 }}>{t('productPage.notFound')}</Alert>;\n  }\n\n  const stockStatus = product.stockQuantity > 0\n    ? { label: t('productPage.inStock'), color: 'success' }\n    : { label: t('productPage.outOfStock'), color: 'error' };\n\n  return (\n    <>\n      <BreadcrumbsComponent\n        links={[\n          { to: `/products?category=${product.categoryId}`, label: product.categoryName },\n          { label: product.name }\n        ]}\n      />\n      <Paper sx={{ p: { xs: 2, md: 4 }, mt: 0 }}>\n      <Grid container spacing={4}>\n        <Grid item xs={12} md={4}>\n          <Box\n            component=\"img\"\n            sx={{\n              width: '100%',\n              height: 'auto',\n              maxHeight: { xs: 400, md: 500 },\n              objectFit: 'contain',\n              border: '1px solid #ddd',\n              borderRadius: 2\n            }}\n            alt={product.name}\n            src={product.imageUrl || `https://via.placeholder.com/400x600.png?text=${encodeURIComponent(product.name)}`}\n          />\n        </Grid>\n        <Grid item xs={12} md={8}>\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom fontWeight=\"bold\">\n            {product.name}\n          </Typography>\n          <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\n            {/* FIX: Pass a string of author names to the translation function, not an array of objects. */}\n            {t('productPage.byAuthor', { \n              authors: (Array.isArray(product.authors) && product.authors.length > 0)\n                ? product.authors.map(author => author.name).join(', ')\n                : ''\n            })}\n          </Typography>\n\n          <Typography variant=\"body1\" paragraph sx={{ whiteSpace: 'pre-wrap' }}>\n            {product.description}\n          </Typography>\n\n          <Grid container spacing={2} sx={{ my: 1 }}>\n            <Grid item xs=\"auto\">\n              <Stack alignItems=\"center\">\n                <Typography variant=\"h3\" fontWeight=\"bold\">{product.rating?.toFixed(2)}</Typography>\n                <Rating name=\"read-only\" value={product.rating || 0} precision={0.1} readOnly size=\"large\" />\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {parseInt(product.ratingDistTotal?.split(':')[1] || 0, 10).toLocaleString()} {t('productPage.ratings')}\n                </Typography>\n                <Typography variant=\"body2\" color=\"text.secondary\">\n                  {product.countsOfReview?.toLocaleString()} {t('productPage.reviews')}\n                </Typography>\n              </Stack>\n            </Grid>\n            <Grid item xs>\n              <Typography variant=\"h6\" gutterBottom>{t('productPage.ratingDistribution')}</Typography>\n              <RatingSummary product={product} />\n            </Grid>\n          </Grid>\n          <Divider sx={{ my: 2 }} />\n\n          <Typography variant=\"h4\" color=\"primary.main\" fontWeight=\"bold\" gutterBottom>\n            {formatPrice(product.price)}\n          </Typography>\n\n          <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, mb: 2 }}>\n            <Chip label={stockStatus.label} color={stockStatus.color} />\n            {product.stockQuantity > 0 && (\n              <Typography variant=\"body2\" color=\"text.secondary\">{t('productPage.stockRemaining', { count: product.stockQuantity })}</Typography>\n            )}\n          </Box>\n\n          {product.stockQuantity > 0 && (\n            <Box sx={{ display: 'flex', alignItems: 'center', my: 2 }}>\n              <Typography sx={{ mr: 2 }}>{t('productPage.quantity')}:</Typography>\n              <IconButton onClick={() => adjustQuantity(-1)} disabled={quantity <= 1} size=\"small\"><Typography variant=\"h6\">-</Typography></IconButton>\n              <TextField\n                value={quantity}\n                onChange={handleQuantityChange}\n                size=\"small\"\n                sx={{ width: '60px', mx: 1, '& input': { textAlign: 'center' } }}\n                inputProps={{ min: 1, max: product.stockQuantity }}\n              />\n              <IconButton onClick={() => adjustQuantity(1)} disabled={quantity >= product.stockQuantity} size=\"small\"><Typography variant=\"h6\">+</Typography></IconButton>\n            </Box>\n          )}\n\n          <Button\n            variant=\"contained\"\n            color=\"primary\"\n            size=\"large\"\n            startIcon={<AddShoppingCartIcon />}\n            onClick={handleAddToCart}\n            disabled={product.stockQuantity === 0 || !quantity}\n            sx={{ mt: 2, px: 5, py: 1.5 }}\n          >\n            {t('productPage.addToCart')}\n          </Button>\n\n          <Divider sx={{ my: 3 }} />\n\n          <Box>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">{t('productPage.publisher')}: {product.publisher}</Typography>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">{t('productPage.published')}: {product.publishDay}/{product.publishMonth}/{product.publishYear}</Typography>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">{t('productPage.pages')}: {product.pagesNumber}</Typography>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">{t('productPage.language')}: {product.language}</Typography>\n            <Typography variant=\"subtitle2\" color=\"text.secondary\">{t('productPage.isbn')}: {product.isbn || 'N/A'}</Typography>\n          </Box>\n        </Grid>\n      </Grid>\n      </Paper>\n    </>\n  );\n};\n\nexport default ProductPage;\n","import React from 'react';\r\nimport { Breadcrumbs as MuiBreadcrumbs, Link, Typography, Container } from '@mui/material';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport HomeIcon from '@mui/icons-material/Home';\r\n\r\n/**\r\n * A reusable breadcrumbs component.\r\n * @param {Object} props\r\n * @param {Array<Object>} props.links - An array of link objects. Each object should have `to` (optional) and `label`.\r\n * e.g. [{ to: '/products', label: 'Products' }, { label: 'Product Name' }]\r\n */\r\nconst BreadcrumbsComponent = ({ links = [] }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const allLinks = [\r\n    { to: '/', label: t('breadcrumbs.home'), icon: <HomeIcon sx={{ mr: 2, fontSize: 'inherit' }} /> },\r\n    ...links,\r\n  ];\r\n\r\n  return (\r\n    <Container maxWidth=\"lg\" sx={{ pt: 0, pb: { xs: 1, md: 2 } }}>\r\n      <MuiBreadcrumbs aria-label=\"breadcrumb\">\r\n        {allLinks.map((link, index) => {\r\n          const isLast = index === allLinks.length - 1;\r\n          if (isLast) {\r\n            return (\r\n              <Typography\r\n                key={index}\r\n                color=\"text.primary\"\r\n                sx={{ display: 'flex', alignItems: 'center' }}\r\n              >\r\n                {link.icon}\r\n                {link.label}\r\n              </Typography>\r\n            );\r\n          }\r\n          return (\r\n            <Link\r\n              component={RouterLink}\r\n              to={link.to}\r\n              key={index}\r\n              underline=\"hover\"\r\n              color=\"inherit\"\r\n              sx={{ display: 'flex', alignItems: 'center' }}\r\n            >\r\n              {link.icon}\r\n              {link.label}\r\n            </Link>\r\n          );\r\n        })}\r\n      </MuiBreadcrumbs>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default BreadcrumbsComponent;\r\n"],"names":["ProductPage","_product$rating","_product$ratingDistTo","_product$countsOfRevi","RatingSummary","_ref","product","t","useTranslation","ratingData","star","value","ratingDist5","ratingDist4","ratingDist3","ratingDist2","ratingDist1","getCount","dist","parseInt","split","totalRatings","ratingDistTotal","_jsx","Box","children","map","item","count","percentage","_jsxs","sx","display","alignItems","mb","cursor","bgcolor","borderRadius","p","Typography","variant","width","color","flexGrow","mx","LinearProgress","height","textAlign","toLocaleString","id","productId","useParams","i18n","addItem","useContext","CartContext","setProduct","useState","loading","setLoading","error","setError","quantity","setQuantity","useEffect","async","data","fetchProduct","err","getProduct","adjustQuantity","amount","newQuantity","stockQuantity","justifyContent","CircularProgress","Alert","severity","mt","stockStatus","label","_Fragment","BreadcrumbsComponent","links","to","concat","categoryId","categoryName","name","Paper","xs","md","Grid","container","spacing","component","maxHeight","objectFit","border","alt","src","imageUrl","encodeURIComponent","gutterBottom","fontWeight","authors","Array","isArray","length","author","join","paragraph","whiteSpace","description","my","Stack","rating","toFixed","Rating","precision","readOnly","size","countsOfReview","Divider","price","language","formatPrice","gap","Chip","mr","IconButton","onClick","disabled","TextField","onChange","e","target","isNaN","inputProps","min","max","Button","startIcon","AddShoppingCartIcon","handleAddToCart","toast","success","px","py","publisher","publishDay","publishMonth","publishYear","pagesNumber","isbn","allLinks","icon","HomeIcon","fontSize","Container","maxWidth","pt","pb","MuiBreadcrumbs","link","index","Link","RouterLink","underline"],"ignoreList":[],"sourceRoot":""}